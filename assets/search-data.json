[{"id":"1","title":"Rationale","content":"Rationale\nnix-mineral tries to address as many system level risks as possible, but there are some things which could improve security but are not feasible to implement.\nThis is most apparent when there are \"switches\" which can't necessarily be turned \"on\" and \"off,\" or when setup can't be declarative.\nUseful resources which could improve security, but can't be directly implemented in nix-mineral are listed here for individual reference.\nResources\nhttps://wiki.nixos.org/wiki/Encrypted_DNS\nhttps://github.com/DNSCrypt/dnscrypt-proxy\nEncrypted DNS. It's not that important, but you might as well. Not included due to significant disagreement on what the ideal DNS server to choose is. Encrypted DNS is easily rendered useless due to adjacent information leaks. This is at no fault to encrypted DNS itself; it's encrypted just fine, but there's simply too many other ways to see or otherwise interfere with a user's browsing regardless. Notable implementations are in systemd-resolved and dnscrypt-proxy.\nhttps://github.com/infinisil/sanix\nhttps://grahamc.com/blog/erase-your-darlings/\nhttps://elis.nu/blog/2020/05/nixos-tmpfs-as-root/\nhttps://github.com/nix-community/impermanence\nStatelessness, through whatever implementation, may result in malware being cleared on reboot. Not included, since it's easy to bypass if known about, and most solutions are highly dependent on other components of the user's configuration (requiring btrfs, zfs, high amounts of ram, and differing opinions on what to persist and what not to). There are many more implementations than listed.\nhttps://github.com/nix-community/lanzaboote\nSecure boot on NixOS, which is a highly impactful mitigation of \"evil maid\" attacks. Can't be set declaratively, although it's planned to mainlined at some point; when this happens, this will be integrated into nix-mineral.\nhttps://madaidans-insecurities.github.io/security-privacy-advice.html\nBasic OPSEC. Decent, concise advice. Many will disagree with, or just disregard a lot here, but the \"General\" advice here is applicable and useful to most people.\nhttps://github.com/arkenfox/user.js\nhttps://github.com/dwarfmaster/arkenfox-nixos\nMost desktop NixOS users use Firefox. Locking it down a bit is commonsense.\nhttps://codeberg.org/celenity/Phoenix\nAn arkenfox alternative featuring a NixOS module. This may make you stand out due to a smaller userbase, though.\nhttps://github.com/ryantm/agenix\nhttps://github.com/Mic92/sops-nix\nSecrets management lets you more safely declaratively set password on NixOS, along with managing other sensitive info. Not included by default because people have different passwords (obviously) and if you imperatively set your password, you don't have to worry about this. There are many, many more implementations than listed.\nhttps://github.com/nixpak/nixpak\nhttps://github.com/Naxdy/nix-bwrapper\nBubblewrap is arguably the best sandboxing solution for desktop Linux. There's many projects to make using bubblewrap easier to use for nix, and these are just some examples. Convenient hardening is better than no hardening, though for fine grained control power users can manually sandbox their stuff or use something else.\nhttps://github.com/e-tho/ucodenix\namd-ucode mainly targets server CPUs, NOT consumer CPUs. If your OEM no longer provides updates for your AMD systemz microcode will likely never be updated by a standard Linux hardware. Luckily, someone made a tool to do so automatically. Certain outdated firmware may prevent updating of microcode past a certain point, see the repo linked above for more details.\nRust replacements, for example:\nhttps://github.com/trifectatechfoundation/sudo-rs\nhttps://github.com/pendulum-project/ntpd-rs\nAll other rust replacements for common Linux services and applications fall under this catagory unless they do something \"novel.\" You need to ask yourself whether guaranteed memory safety is worth the risk of a less audited, and sometimes larger codebase. Do you trust the programming language architecture or the programmer more?\nhttps://datatracker.ietf.org/doc/rfc8915/\nConsider using NTP implementations that support NTS, so that NTP requests are encrypted and prevent tampering or eavesdropping which may interfere with certain authentication mechanism. nix-mineral.extras.system.secure-chrony does this, but is highly opinionated in configuration. There are many other implementations not listed here.\nhttps://wiki.nixos.org/wiki/Automatic_system_upgrades\nRegular updates keep your system patched from many known vulnerabilities. Not included by default because most people will schedule their auto-updates differently (or object to automatic updates entirely for a variety of non-security related reasons, e.g avoiding unwanted feature changes).\nhttps://wiki.nixos.org/wiki/Chromium\nor NIXOS_OZONE_WL=1\nTangentially related. For some reason, Chromium doesn't use Wayland by default on NixOS. This means no window isolation, and it comes with the added effect that Chromium is a blurry mess if you use display scaling.\nhttps://github.com/lkrg-org/lkrg\nSupposedly kills several classes of vulnerabilities in the Linux kernel. Excluded due to apparent breakage on NixOS. Pending any additional testing or workarounds, this may be reconsidered. See https://github.com/cynicsketch/nix-mineral/issues/48 and https://www.kicksecure.com/wiki/Linux_Kernel_Runtime_Guard_LKRG#Deprecation_in_Kicksecure","path":"ADDITIONAL-RESOURCES.html","tokens":["use","celenity","arkenfox-nixos","differing","related","opsec","updates","nixos_ozone_wl","patched","advice","amd-ucode","worth","sensitive","user","userbase","zfs","power","linked","all","consider","added","object","additional","nix-mineral","worry","ideal","firefox","setup","basic","ryantm","imperatively","nix-bwrapper","targets","audited","amd","system","due","interfere","notable","solutions","rationale","locking","implementation","for","module","out","evil","stuff","hardware","someone","when","outdated","lanzaboote","erase-your-darlings","concise","trifectatechfoundation","attacks","sudo-rs","common","arkenfox","individual","sanix","sandboxing","novel","doc","authentication","opinionated","keep","reason","linux_kernel_runtime_guard_lkrg","known","implement","ways","blog","unwanted","breakage","necessarily","integrated","opinions","though","updated","from","dwarfmaster","bit","tries","too","implemented","ntpd-rs","less","might","browsing","reconsidered","html","about","hardening","supposedly","changes","classes","than","solution","many","fall","guaranteed","adjacent","fault","control","datatracker","useful","listed","most","cpus","consumer","pendulum-project","blurry","scaling","feasible","risks","not","ram","phoenix","featuring","leaks","their","extras","automatic_system_upgrades","automatic","dnscrypt-proxy","encrypted","along","feature","fine","safely","better","manually","passwords","and","result","eavesdropping","off","mitigation","cleared","using","sops-nix","kernel","configuration","impactful","easy","else","ucodenix","are","2020","systemz","microcode","applications","otherwise","pending","happens","default","past","nixos","whether","avoiding","doesn","workarounds","services","effect","you","requiring","included","reference","rendered","level","reboot","obviously","examples","programmer","repo","display","safety","kicksecure","components","make","high","important","easily","but","see","maid","above","systemd-resolved","directly","prevent","any","wayland","luckily","deprecation_in_kicksecure","stand","nixpak","encrypted_dns","commonsense","standard","updating","well","since","reasons","improve","which","boot","linux","more","desktop","likely","yourself","dnscrypt","codeberg","programming","switches","information","architecture","address","general","sandbox","never","what","risk","sometimes","mic92","requests","nixos-tmpfs-as-root","here","regardless","secure","secure-chrony","best","dependent","managing","turned","grahamc","lot","agenix","vulnerabilities","language","disregard","means","itself","with","ietf","support","unless","the","just","wiki","github","server","things","declarative","these","grained","decent","mechanism","persist","something","firmware","certain","significant","impermanence","statelessness","highly","disagree","smaller","have","possible","tool","nts","larger","auto-updates","window","lkrg","entirely","info","www","tangentially","choose","set","replacements","they","mainly","other","btrfs","simply","security-privacy-advice","amounts","ntp","issues","declaratively","dns","whatever","users","because","convenient","mainlined","some","kills","elis","down","oem","ask","this","management","several","nix-community","differently","non-security","automatically","org","infinisil","malware","catagory","bypass","apparent","secrets","password","bubblewrap","memory","rust","mess","can","will","arguably","applicable","your","don","testing","point","different","need","useless","https","planned","nix","into","provides","longer","security","under","trust","excluded","made","variety","may","lkrg-org","although","comes","that","isolation","does","cynicsketch","madaidans-insecurities","e-tho","tampering","being","lets","alternative","example","details","rfc8915","easier","people","projects","chromium","regular","could","there","com","disagreement","through","resources","codebase","schedule","implementations","naxdy"],"title_tokens":["rationale"],"anchors":[{"text":"Rationale","id":"rationale","level":1,"tokens":["rationale"]},{"text":"Resources","id":"resources","level":1,"tokens":["resources"]}]},{"id":"2","title":"Contributing","content":"Contributing\nOne of the main ideas is to be as modular as possible, so don't create modules that do too many things at the same time, always try to separate them into smaller modules, with unique responsibilities.\nTable of Contents\nRules\nLibs\nCreating a module\nCreating a category\nHardening a filesystem\nCreating a preset\nAdding functions to the lib\nLicensing and copyright\n\nRules\nWhenever you need to use lib/builtins functions, use the l attribute, which is available in all modules. It contains all lib functions, builtins, and additional nix-mineral functions.\nFormat the code with the formatter in flake.nix. If using NixOS, use the nix fmt command within the repository, which will format all files with the correct formatter.\nExplain the options in their descriptions (or in comments). The reason for each setting, and WHY this setting makes the system more secure for the user.\nWhen creating new settings, use names in lowercase and hyphens to separate words, for example: example-feature-x.\nInvert options that are intended to disable something, for example: don't use disable-example-feature-y, use example-feature-y and set the default to false.\nUse the l.mkBoolOption function to create boolean options.\nDo not attempt to add any feature which has been intentionally excluded under OMITTED.md or ADDITIONAL-RESOURCES.md without first creating an issue.\nIssues should be created for most feature changes before attempting a PR. Bug fixes, and minor documentation changes do not require issues, but it is still heavily encouraged.\nWhere applicable, update both presets and the README to reflect any new options.\nUse l.mkOverride 900 over l.mkForce when forcefully overriding NixOS defaults is necessary, to make sure it actually applies.\nWhere applicable, add GPL license headers to new source code files:\n\nLibs\nnix-mineral has a library with things used in several files in the project, to avoid code repetition. Common things you'll likely use are explained here. Each function declaration and detailed explanations are located in the lib/default.nix file. l is an attrset with all the lib functions, builtins functions, and nix-mineral functions. So use l to access any function below.\nl.mkBoolOption: Creates a boolean option with description and default value.\nTakes 2 arguments: desc, bool\nExample:\nl.sources: Attrset with all sources inside the lib/sources.toml file (Used with fetchGhFile, fetchGit, fetchTarball, etc).\nl.fetchGhFile: Fetches a file directly from a GitHub repository.\nArgs:\nuser: GitHub username or organization name.\nrepo: Repository name.\nrev: Branch, tag or commit.\nfile: Path to the file within the repository.\nsha256: Hash sha256 of the file.\n\nExamples:\nUsing with l.sources:\nl.importModule: import wrapper to pass extra args to a module, and also pass the lib l.\nTakes 2 arguments: path, extraArgs\nExample:\nCreating a module\nChoose a module type: settings: Main settings, which modify things in the default preset. extras: Extra settings, which modify things only if specified by the user, and may contain opinionated additional software.\nChoose a category: Enter the folder for your chosen module type, and choose a category to place your module in (or create a new one if needed).\nCreate the module file: Let's say I want to create a settings module in the system category. Here's what the process would look like:\n\nFirst, I create a file example-module.nix inside the system folder with this:\nImport the module: Inside the system folder, there is a file with the name default.nix, which imports all modules within that category. You just need to add the relative file path to the categoryModules list inside the settings/system/default.nix file.\nExamples of different modules: settings/system/multilib.nix: A simple module. settings/kernel/cpu-mitigations.nix: A module that uses an enum instead of a bool. extras/misc/usbguard.nix: A module with several options.\n\nCreating a category\nChoose a module type: settings: Main settings, which modify things in the default preset. extras: Extra settings, which modify things only if specified by the user, and may contain opinionated additional software.\nCreate a folder with the category name within the chosen module type: Example: settings/new-category\nCreate a default.nix file inside the category folder: Example: settings/new-category/default.nix Place the following code inside the file, adapting the name, description, and the modules you want to add:\n\nImport the category: Within the nix-mineral.nix file, import the category by adding the relative path of the category folder to the settingsModules or extrasModules list, depending on the type of category you created. Example: settings/new-category would be imported within the settingsModules list in the nix-mineral.nix file.\n\nHardening a filesystem\nTo harden a filesystem, you follow the same options a normal user would use, but simply place these options inside the filesystems/normal.nix or filesystems/special.nix modules, depending on the type of filesystem you want to harden. Examples are within the files.\nCreating a preset\nCreate a file with the preset name inside the presets folder: Example: presets/example-preset.nix The code inside the file is the same as what a normal user would use to configure nix-mineral, but each option must be set using mkPreset or mkPresets functions. mkPreset is used to set a single option, while mkPresets is used to set multiple options within an attrset. An example of a preset below:\n\nAdd your preset to the presets/default.nix file: In the presets attrset at the top of the file, add your preset with the name as the key and the description as the value. Your preset name must match the filename you created in step 1. This will automatically import the preset file when the user includes the preset name in their configuration.\n\nAdding functions to the lib\nCreate your function within the let in in the lib/default.nix file, following the pattern of the other functions. Then place your function within the flake.lib list at the end of the file, and within the list inside the importModule function as well.\nLicensing and copyright\nBecause it is pragmatic to take from existing research, consideration to licensing applies.\nThis is not legal advice. The information provided is for general informational purposes only and may not reflect the most current legal developments. The author is not an attorney and makes no guarantees regarding the accuracy or completeness of this information. The author disclaims any liability for actions taken or not taken based on the content provided.\nInvidividual, purely functional configuration decisions and purely factual statements are usually not copyrightable due to merger doctrine.\nInformal crediting exists as a courtesy, not as a way to fulfill proper license attribution requirements.\nIf in doubt, do not blindly copy. Use proper license attribution where permitted and required.","path":"CONTRIBUTING.html","tokens":["descriptions","description","taken","enum","informal","contributing","copyrightable","set","applicable","project","only","adapting","changes","both","instead","take","should","let","need","due","your","repetition","mkpresets","like","create","adding","informational","nix-mineral","category","all","update","default","but","option","place","then","lib","attorney","fmt","reason","branch","look","attribute","mkbooloption","has","relative","been","well","guarantees","attempting","organization","courtesy","configuration","settings","overriding","libs","includes","here","under","folder","many","content","repository","consideration","which","fixes","follow","legal","responsibilities","make","contains","etc","options","defaults","creates","pass","possible","the","key","invert","crediting","names","smaller","excluded","encouraged","fetchgit","wrapper","use","nixos","sources","software","way","disable-example-feature-y","explain","makes","main","setting","lowercase","false","issue","sure","declaration","configure","code","username","automatically","because","separate","uses","heavily","imported","into","created","disclaims","formatter","extrasmodules","step","boolean","advice","always","path","available","contain","toml","list","command","below","proper","hyphens","more","import","each","used","system","top","try","any","repo","attrset","there","fetches","multilib","simply","statements","additional","exists","require","time","modules","are","and","while","takes","issues","additional-resources","900","table","detailed","over","developments","explained","purely","functional","that","choose","nix","inside","disable","user","completeness","fulfill","things","add","existing","you","depending","attribution","examples","avoid","pattern","process","when","just","new","args","kernel","filename","usually","file","functions","first","cpu-mitigations","with","example-module","these","liability","decisions","merger","readme","presets","correct","words","common","forcefully","would","new-category","this","files","source","whenever","special","extras","blindly","example-feature-x","settingsmodules","requirements","filesystem","creating","intended","them","documentation","without","extraargs","may","within","same","doctrine","enter","simple","secure","will","regarding","importmodule","example-preset","based","imports","desc","general","doubt","using","attempt","still","opinionated","purposes","tag","gpl","permitted","for","factual","author","also","misc","reflect","from","example","omitted","headers","feature","extra","say","mkpreset","actions","most","pragmatic","hash","end","one","directly","located","categorymodules","copy","arguments","following","preset","research","several","usbguard","flake","bug","provided","copyright","single","example-feature-y","before","likely","value","unique","name","modify","current","multiple","library","intentionally","required","access","rules","what","ideas","minor","specified","want","necessary","match","where","invidividual","information","why","chosen","commit","format","something","github","contents","must","comments","not","needed","hardening","accuracy","actually","different","other","modular","license","bool","function","don","fetchghfile","mkforce","fetchtarball","rev","mkoverride","normal","licensing","too","builtins","type","module","their","explanations","harden","filesystems","sha256","applies"],"title_tokens":["contributing"],"anchors":[{"text":"Contributing","id":"contributing","level":1,"tokens":["contributing"]},{"text":"Table of Contents","id":"table-of-contents","level":1,"tokens":["table","contents"]},{"text":"Rules","id":"rules","level":1,"tokens":["rules"]},{"text":"Libs","id":"libs","level":1,"tokens":["libs"]},{"text":"Creating a module","id":"creating-a-module","level":1,"tokens":["module","creating"]},{"text":"Creating a category","id":"creating-a-category","level":1,"tokens":["creating","category"]},{"text":"Hardening a filesystem","id":"hardening-a-filesystem","level":1,"tokens":["filesystem","hardening"]},{"text":"Creating a preset","id":"creating-a-preset","level":1,"tokens":["creating","preset"]},{"text":"Adding functions to the lib","id":"adding-functions-to-the-lib","level":1,"tokens":["lib","the","functions","adding"]},{"text":"Licensing and copyright","id":"licensing-and-copyright","level":1,"tokens":["copyright","and","licensing"]}]},{"id":"3","title":"Non-specific omissions","content":"Non-specific omissions\nMost \"replacement\" software is omitted due to causing breakage or interfering with user freedom.\nExamples include most rust replacements for common utilities, such as sudo-rs or ntpd-rs.\nThere may be exceptions for software which does not interfere with existing user software preferences. For example, apparmor is whitelisted from this due to being the only usable MAC system on NixOS.\nFuture reference for potentially useful software which is still omitted under this rule may be added to ADDITIONAL-RESOURCES.md\nRemember that this is supposed to be a drop-in NixOS module and not a Linux distribution. Common sense constraints on scope have to apply.\n\nSpecific omissions\nFeatures in sources of research for nix-mineral which have been intentionally omitted due to irrelevancy or logistical issues.\nlinux-hardened is not used because it breaks unpriviliged userns and has historically failed to receive regular updates in nixpkgs.\nsysctl omitted from K4YT3X config that are out of scope of nix-mineral and hardening but may be useful anyways to some, see their repo for details:\nkernel.pid_max = 4194304\nkernel.panic = 10\nfs.file-max = 9223372036854775807\nfs.inotify.max_user_watches = 524288\nnet.core.netdev_max_backlog = 250000\nnet.core.rmem_default = 8388608\nnet.core.wmem_default = 8388608\nnet.core.rmem_max = 536870912\nnet.core.wmem_max = 536870912\nnet.core.optmem_max = 40960\nnet.ipv4.tcp_congestion_control = bbr\nnet.ipv4.tcp_synack_retries = 5\nnet.ipv4.ip_local_port_range = 1024 65535\nnet.ipv4.tcp_slow_start_after_idle = 0\nnet.ipv4.tcp_mtu_probing = 1\nnet.ipv4.tcp_base_mss = 1024\nnet.ipv4.tcp_rmem = 8192 262144 536870912\nnet.ipv4.tcp_wmem = 4096 16384 536870912\nnet.ipv4.tcp_adv_win_scale = -2\nnet.ipv4.tcp_notsent_lowat = 131072\nSections from madaidan's guide that are IRRELEVANT/NON-APPLICABLE:\n1 (Advice)\n2.1 (Advice)\n2.3.3 (Advice)\n2.5.1 (Advice)\n2.5.3 (Advice)\n2.6 (Advice)\n2.10 (Package is broken)\n7 (Advice)\n10.5.4 (The problem of NTP being unencrypted is fixed by using NTS instead. Note that this means using chrony, as in \"Software Choice\" in the overrides, which is not default behavior!)\n15 (Implemented by default)\n19 (Advice)\n20 (Not relevant)\n21.7 (Advice, not in threat model)\n22 (Advice)\nSections from madaidan's guide requiring manual user intervention:\n2.7 (systemd service hardening must be done manually)\n2.9 (Paid software)\n2.11 (Unique for all hardware, inconvenient)\n4 (Sandboxing must be done manually)\n6 (Compiling everything is inconvenient)\n8.6 (No option, not for all systems)\n8.7 (Inconvenient, depends on specific user behavior)\n10.1 (Up to user to determine hostname and username)\n10.2 (Up to user to determine timezone, locale, and keymap)\n10.5.3 (Not packaged)\n10.6 (Not packaged, inconvenient and not within threat model)\n11.1 (Manual removal of SUID/SGID is manual)\n11.2 (No known way to set umask declaratively systemwide, use your shellrc or home manager to do so)\n14 (Rather than enforce password quality with PAM, expect user to enforce their own password quality; faildelay is, however, implemented here)\n21.1 (Out of scope)\n21.2 (See above)\n21.3 (User's job to set passwords)\n21.3.1 (See above)\n21.3.2 (See above)\n21.3.3 (See above)\n21.4 (Non-declarative setup, experimental)\nsysctl omitted due to already being used by default on NixOS:\n\"vm.max_map_count=1048576\" (Due to its relevance in reducing crashes for memory intensive applications, despite a secondary need to be used in order to have enough guard pages for hardened_malloc)","path":"OMITTED.html","tokens":["usable","distribution","drop-in","everything","their","unencrypted","common","such","suid","quality","timezone","1024","enforce","non-declarative","job","sysctl","sgid","are","tcp_wmem","whitelisted","username","omitted","potentially","set","9223372036854775807","expect","paid","memory","option","some","tcp_slow_start_after_idle","secondary","breakage","ntpd-rs","manually","nts","8192","for","historically","umask","intervention","however","have","scope","faildelay","using","panic","freedom","future","mac","with","omissions","tcp_adv_win_scale","crashes","updates","pid_max","ip_local_port_range","logistical","examples","already","under","exceptions","additional-resources","wmem_max","useful","tcp_base_mss","package","relevance","enough","known","tcp_congestion_control","apply","rmem_default","16384","has","the","relevant","524288","see","service","keymap","added","user","problem","apparmor","been","must","way","40960","interfering","intentionally","password","above","262144","despite","non-specific","than","means","linux-hardened","sections","sources","need","choice","preferences","from","broken","4194304","may","depends","rather","manual","there","most","bbr","implemented","536870912","causing","k4yt3x","which","passwords","setup","because","only","all","anyways","ipv4","within","tcp_notsent_lowat","here","note","home","manager","userns","still","guard","breaks","interfere","file-max","failed","remember","irrelevancy","shellrc","reference","optmem_max","linux","constraints","this","and","done","rule","4096","determine","used","core","requiring","specific","include","tcp_mtu_probing","unpriviliged","model","example","regular","hardware","removal","applications","packaged","net","non-applicable","irrelevant","advice","1048576","repo","chrony","inconvenient","madaidan","systemwide","supposed","issues","hardened_malloc","65535","overrides","systems","utilities","own","hardening","compiling","receive","131072","max_map_count","rust","reducing","behavior","config","out","its","unique","kernel","experimental","system","tcp_rmem","intensive","replacements","features","software","tcp_synack_retries","order","your","systemd","wmem_default","nix-mineral","fixed","pages","module","locale","not","existing","but","due","max_user_watches","use","being","research","8388608","sandboxing","sense","netdev_max_backlog","that","guide","hostname","inotify","replacement","default","sudo-rs","nixpkgs","details","250000","pam","threat","nixos","instead","rmem_max","ntp","does","declaratively"],"title_tokens":["non-specific","omissions"],"anchors":[{"text":"Non-specific omissions","id":"non-specific-omissions","level":1,"tokens":["omissions","non-specific"]},{"text":"Specific omissions","id":"specific-omissions","level":1,"tokens":["specific","omissions"]},{"text":"sysctl omitted from K4YT3X config that are out of scope of nix-mineral and hardening but may be useful anyways to some, see their repo for details:","id":"sysctl-omitted-from-k4yt3x-config-that-are-out-of-scope-of-nix-mineral-and-hardening-but-may-be-useful-anyways-to-some--see-their-repo-for-details","level":2,"tokens":["but","may","repo","sysctl","k4yt3x","that","are","out","nix-mineral","some","see","for","scope","config","anyways","their","details","and","from","omitted","useful","hardening"]},{"text":"Sections from madaidan's guide that are IRRELEVANT/NON-APPLICABLE:","id":"sections-from-madaidan-s-guide-that-are-irrelevant-non-applicable","level":2,"tokens":["are","that","irrelevant","non-applicable","guide","madaidan","from","sections"]},{"text":"Sections from madaidan's guide requiring manual user intervention:","id":"sections-from-madaidan-s-guide-requiring-manual-user-intervention","level":2,"tokens":["from","manual","user","madaidan","sections","requiring","guide","intervention"]},{"text":"sysctl omitted due to already being used by default on NixOS:","id":"sysctl-omitted-due-to-already-being-used-by-default-on-nixos","level":2,"tokens":["used","sysctl","default","already","being","due","omitted","nixos"]}]},{"id":"4","title":"nix-mineral","content":"nix-mineral\nnix-mineral is a NixOS module for convenient system hardening. Rather than be named after a mineral, it's named after the word \"mineral\".\nWARNING\nnix-mineral is Alpha software! Loss of data or functionality may occur, especially on non-fixed releases, and user cooperation in debugging is expected!\nDocumentation and scope\nnix-mineral aims to serve as a drop-in addition to any NixOS system.\nBecause of this, complete overhauls of system UX or architecture is infeasible compared to dedicated security focused operating systems with complete executive control over design.\nBy default, nix-mineral reduces attack surface by securely configuring existing software. It is not magic, but it's better than nothing.\nnix-mineral's threat model assumes non-state adversaries, and anonymity is not considered.\nFor more information on, refer to the documents below.\nContributing guidelines: CONTRIBUTING\nAdditional resources: ADDITIONAL-RESOURCES.md\nOmitted features: OMITTED.md\nFeatures\nA full rundown of features is best obtained by reading the individual submodules for every option nix-mineral offers.\nSome notable features include:\nFilesystem hardening with both systemd-tmpfiles and mount options\nExtensive kernel hardening using sysctl and boot parameters\nNetwork hardening through sysctl and configuration of relevant services\nAttack surface reduction by an extensive kernel module blacklist\nSystem entropy hardening\n\nUsage\nAutomatic Installation (fetchgit)\nMay be used with or without flakes. However, the flake specific method in the next section is preferred because it allows version pinning.\nSince we are using flake-compat inside the project, you can use the nix-mineral without needing to have flakes enabled, using fetchGit\nExample with fetchgit:\nUsage With Flakes\nFor use in flake enabled systems, and to enable automatic updates and version pinning, use this method.\nAdd nix-mineral as an input to your flake:\nImport nix-mineral.nix from the input and enable the module:\nConfiguring options\nIt is likely you will need to change some options in order to make your individual hardware and software configuration function as intended.\nPresets for doing so are available in the presets directory of this repository.\nRefer to the individual submodules for more information on what each option does.\nAn example configuration to enable all defaults, use the \"compatibility\" preset, and then disable TCP window scaling while enabling multilib support and IP forwarding functionality is shown below.\nContributing\nHave any ideas for the project? Want to help improve it by writing code or documentation? Head to the issues tracker and we can talk a solution! Contributing guidelines: CONTRIBUTING.MD\nCredits\nSpecial thanks to all our wonderful contributors who have helped make this project possible, as well many other projects, named and unnamed, which nix-mineral has borrowed insight and configuration from:\nOriginal basis for hardening, of which many of the below have themselves derived from:\nURL: https://madaidans-insecurities.github.io/guides/linux-hardening.html\nArchive: https://web.archive.org/web/20220320000126/https://madaidans-insecurities.github.io/guides/linux-hardening.html\nAdditionally used is privsec's Desktop Linux Hardening:\nURL: https://privsec.dev/posts/linux/desktop-linux-hardening/\nArchive: https://web.archive.org/web/20240629135847/https://privsec.dev/posts/linux/desktop-linux-hardening/#kernel\nBluetooth configuration and module blacklist, with various additional settings inspiration from Kicksecure's security-misc:\nURL: https://github.com/Kicksecure/security-misc\nSupplement to sysctl configuration borrowed from Tommy's Linux-Setup-Scripts:\nURL: https://github.com/Metropolis-nexus/Common-Files/blob/main/etc/sysctl.d/99-workstation.conf\nOptional chrony configuration was borrowed from GrapheneOS server infrastructure:\nURL: https://github.com/GrapheneOS/infrastructure\nOriginal idea to restrict nix to wheel user from Xe Iaso:\nURL: https://xeiaso.net/blog/paranoid-nixos-2021-07-18/\nVarious security-relevant sysctl configuration from K4YT3X's sysctl:\nURL: https://github.com/k4yt3x/sysctl/blob/master/sysctl.conf\nThe hardened.nix profile upstream, which inspired this project:\nURL: https://github.com/NixOS/nixpkgs/blob/master/nixos/modules/profiles/hardened.nix\nnix-bitcoin's hardening, which has also inspired this project:\nURL: https://github.com/fort-nix/nix-bitcoin","path":"index.html","tokens":["dev","scaling","change","security-misc","features","etc","other","releases","best","url","additional","configuration","likely","which","network","reduction","code","then","projects","linux-setup-scripts","contributors","was","options","your","enabling","omitted","entropy","master","shown","guides","filesystem","extensive","nixpkgs","need","issues","directory","drop-in","boot","needing","full","fetchgit","supplement","user","expected","example","addition","notable","kernel","flake","tcp","archive","while","bluetooth","over","infrastructure","and","software","using","offers","idea","information","many","credits","operating","profiles","intended","tommy","occur","complete","module","want","default","control","refer","with","since","not","scope","after","warning","security","magic","but","section","updates","special","main","systems","99-workstation","server","mineral","every","kicksecure","thanks","blog","inspired","rather","original","nothing","from","rundown","allows","individual","support","pinning","non-fixed","may","below","inspiration","madaidans-insecurities","posts","modules","nixos","parameters","guidelines","are","aims","reduces","compared","project","especially","linux-hardening","wonderful","enabled","optional","include","blob","securely","presets","functionality","nix-mineral","overhauls","non-state","20220320000126","iaso","serve","window","20240629135847","chrony","com","contributing","usage","you","can","head","privsec","talk","org","assumes","preferred","order","executive","without","k4yt3x","each","next","because","preset","have","repository","architecture","services","named","inside","linux","settings","metropolis-nexus","tracker","possible","system","restrict","adversaries","option","various","compatibility","nix-bitcoin","model","well","unnamed","however","documentation","fort-nix","dedicated","net","use","enable","solution","existing","help","nix","improve","through","basis","loss","multilib","function","desktop","submodules","method","all","better","github","blacklist","alpha","ideas","common-files","doing","additionally","hardware","writing","anonymity","any","installation","wheel","this","resources","add","design","attack","surface","additional-resources","systemd-tmpfiles","mount","documents","https","conf","profile","upstream","derived","for","some","grapheneos","defaults","flake-compat","our","paranoid-nixos-2021-07-18","cooperation","reading","make","disable","hardening","also","insight","threat","focused","more","data","relevant","forwarding","available","desktop-linux-hardening","the","web","than","does","themselves","html","word","considered","configuring","both","version","will","sysctl","borrowed","used","xeiaso","who","what","convenient","specific","flakes","helped","obtained","security-relevant","import","has","automatic","hardened","infeasible","debugging","input"],"title_tokens":["nix-mineral"],"anchors":[{"text":"nix-mineral","id":"nix-mineral","level":1,"tokens":["nix-mineral"]},{"text":"WARNING","id":"warning","level":2,"tokens":["warning"]},{"text":"Documentation and scope","id":"documentation-and-scope","level":2,"tokens":["and","scope","documentation"]},{"text":"Features","id":"features","level":2,"tokens":["features"]},{"text":"Usage","id":"usage","level":2,"tokens":["usage"]},{"text":"Automatic Installation (fetchgit)","id":"automatic-installation--fetchgit","level":3,"tokens":["installation","fetchgit","automatic"]},{"text":"Usage With Flakes","id":"usage-with-flakes","level":3,"tokens":["usage","with","flakes"]},{"text":"Configuring options","id":"configuring-options","level":3,"tokens":["options","configuring"]},{"text":"Credits","id":"credits","level":3,"tokens":["credits"]}]},{"id":"5","title":"Option: nix-mineral.enable","content":"Whether to enable the nix-mineral module.","path":"options.html#option-nix-mineral-enable","tokens":["whether","enable","the","nix-mineral","module"],"title_tokens":["nix-mineral","enable","option"],"anchors":[]},{"id":"6","title":"Option: nix-mineral.extras","content":"Extra options that are not part of the main configuration.","path":"options.html#option-nix-mineral-extras","tokens":["the","options","extra","main","that","configuration","part","are","not"],"title_tokens":["extras","option","nix-mineral"],"anchors":[]},{"id":"7","title":"Option: nix-mineral.extras.entropy","content":"Modify entropy settings for improved security","path":"options.html#option-nix-mineral-extras-entropy","tokens":["settings","entropy","modify","for","improved","security"],"title_tokens":["option","entropy","extras","nix-mineral"],"anchors":[]},{"id":"8","title":"Option: nix-mineral.extras.entropy.extra-latent-entropy","content":"Gather more entropy on boot.\n::: {.note} Only works with the linux_hardened patchset, which is currently ill advised due to inconsistent updates in nixpkgs. This does nothing if using another kernel. Also slows down boot time by a bit. :::","path":"options.html#option-nix-mineral-extras-entropy-extra-latent-entropy","tokens":["works","due","does","linux_hardened","updates","patchset","more","nixpkgs","using","inconsistent","also","advised","boot","down","slows","with","the","note","another","ill","kernel","nothing","this","which","time","entropy","gather","currently","only","bit"],"title_tokens":["option","nix-mineral","extras","entropy","extra-latent-entropy"],"anchors":[]},{"id":"9","title":"Option: nix-mineral.extras.kernel","content":"Extra settings to harden the linux kernel.","path":"options.html#option-nix-mineral-extras-kernel","tokens":["the","extra","kernel","settings","linux","harden"],"title_tokens":["extras","nix-mineral","option","kernel"],"anchors":[]},{"id":"10","title":"Option: nix-mineral.extras.kernel.intelme-kmodules","content":"Intel ME related kernel modules.\nDisable this to avoid putting trust in the highly privilege ME system, but there are potentially other consequences.\n::: {.tip} If you use an AMD system, you can disable this without negative consequence and reduce attack surface. :::\n::: {.note} Intel users should read more about the issue at the below links:\nhttps://www.kernel.org/doc/html/latest/driver-api/mei/mei.html\nhttps://en.wikipedia.org/wiki/Intel_Management_Engine#Security_vulnerabilities\nhttps://www.kicksecure.com/wiki/Out-of-band_Management_Technology#Intel_ME_Disabling_Disadvantages\nhttps://github.com/Kicksecure/security-misc/pull/236#issuecomment-2229092813\nhttps://github.com/Kicksecure/security-misc/issues/239 :::","path":"options.html#option-nix-mineral-extras-kernel-intelme-kmodules","tokens":["intel","www","trust","putting","links","com","html","236","attack","you","note","should","about","out-of-band_management_technology","239","the","consequences","security_vulnerabilities","security-misc","surface","below","https","latest","are","negative","driver-api","consequence","and","system","kernel","github","privilege","use","users","issues","modules","potentially","issuecomment-2229092813","reduce","related","amd","wikipedia","wiki","can","disable","kicksecure","without","other","this","doc","pull","mei","read","more","there","avoid","but","intel_management_engine","issue","highly","tip","intel_me_disabling_disadvantages","org"],"title_tokens":["nix-mineral","intelme-kmodules","option","kernel","extras"],"anchors":[]},{"id":"11","title":"Option: nix-mineral.extras.kernel.load-kernel-modules","content":"Allow loading of kernel modules not only at boot via kernel commandline.\n::: {.warning} If false, very likely to cause breakage unless you can compile a list of every module you need and add that to your boot parameters manually. :::","path":"options.html#option-nix-mineral-extras-kernel-load-kernel-modules","tokens":["allow","unless","via","every","can","module","very","commandline","likely","parameters","only","loading","modules","manually","list","not","boot","false","breakage","cause","your","warning","add","kernel","compile","you","need","that","and"],"title_tokens":["option","nix-mineral","kernel","load-kernel-modules","extras"],"anchors":[]},{"id":"12","title":"Option: nix-mineral.extras.kernel.warn-panic","content":"Be extra paranoid of potential kernel exploitation by inducing kernel panics on kernel warns and above.\n::: {.warning} This will cause massive instability in the event of any bugs in the kernel. :::","path":"options.html#option-nix-mineral-extras-kernel-warn-panic","tokens":["any","this","warns","massive","paranoid","panics","extra","inducing","potential","event","cause","bugs","warning","above","exploitation","will","instability","and","kernel","the"],"title_tokens":["extras","option","kernel","warn-panic","nix-mineral"],"anchors":[]},{"id":"13","title":"Option: nix-mineral.extras.misc","content":"Extra misc settings.\nMost of those are relatively opinionated additional software.","path":"options.html#option-nix-mineral-extras-misc","tokens":["are","settings","relatively","extra","most","additional","those","software","opinionated","misc"],"title_tokens":["extras","nix-mineral","option","misc"],"anchors":[]},{"id":"14","title":"Option: nix-mineral.extras.misc.apparmor","content":"Use an opinionated AppArmor configuration.\n::: {.note} This is currently absolutely useless except for compliance, because there are no currently functioning AppArmor profiles! This option exists only for reference sake, once AppArmor is properly fixed to work on NixOS. :::","path":"options.html#option-nix-mineral-extras-misc-apparmor","tokens":["option","apparmor","only","profiles","absolutely","configuration","for","because","except","are","reference","there","this","sake","currently","fixed","opinionated","work","compliance","nixos","note","useless","use","exists","properly","once","functioning"],"title_tokens":["option","misc","nix-mineral","extras","apparmor"],"anchors":[]},{"id":"15","title":"Option: nix-mineral.extras.misc.doas-sudo-wrapper","content":"Creates a wrapper for doas to simulate sudo, with nano to utilize rnano as editor for editing as root.","path":"options.html#option-nix-mineral-extras-misc-doas-sudo-wrapper","tokens":["wrapper","sudo","root","simulate","nano","utilize","editing","with","rnano","for","creates","doas","editor"],"title_tokens":["option","doas-sudo-wrapper","misc","extras","nix-mineral"],"anchors":[]},{"id":"16","title":"Option: nix-mineral.extras.misc.replace-sudo-with-doas","content":"Replace sudo with doas.\ndoas has a lower attack surface, but is less audited.","path":"options.html#option-nix-mineral-extras-misc-replace-sudo-with-doas","tokens":["replace","lower","less","audited","with","doas","attack","but","sudo","has","surface"],"title_tokens":["replace-sudo-with-doas","extras","option","nix-mineral","misc"],"anchors":[]},{"id":"17","title":"Option: nix-mineral.extras.misc.ssh-hardening","content":"Use an opinionated SSH hardening config. Complies with ssh-audit.\nRead what everything does first, or else you might get locked out.\nThis, for example, prevents root login AND password based login.","path":"options.html#option-nix-mineral-extras-misc-ssh-hardening","tokens":["first","hardening","based","you","ssh","use","complies","prevents","what","ssh-audit","does","config","example","everything","for","opinionated","might","this","locked","password","login","else","get","with","out","root","and","read"],"title_tokens":["extras","ssh-hardening","option","nix-mineral","misc"],"anchors":[]},{"id":"18","title":"Option: nix-mineral.extras.misc.usbguard.enable","content":"Enable USBGuard, a tool to restrict USB devices.\ndisable to avoid hassle with handling USB devices at all.","path":"options.html#option-nix-mineral-extras-misc-usbguard-enable","tokens":["all","tool","devices","usb","disable","restrict","enable","avoid","usbguard","hassle","with","handling"],"title_tokens":["nix-mineral","option","extras","usbguard","enable","misc"],"anchors":[]},{"id":"19","title":"Option: nix-mineral.extras.misc.usbguard.gnome-integration","content":"Enable USBGuard dbus daemon and add polkit rules to integrate USBGuard with GNOME Shell.\nIf you use GNOME, this means that USBGuard automatically allows all newly connected devices while unlocked, and blacklists all newly connected devices while locked. This is obviously very convenient, and is similar behavior to handling USB as ChromeOS and GrapheneOS.","path":"options.html#option-nix-mineral-extras-misc-usbguard-gnome-integration","tokens":["connected","shell","similar","gnome","polkit","automatically","means","you","newly","locked","handling","chromeos","dbus","allows","this","use","daemon","unlocked","very","and","usb","obviously","devices","rules","add","that","with","all","while","behavior","grapheneos","enable","usbguard","integrate","convenient","blacklists"],"title_tokens":["misc","usbguard","gnome-integration","nix-mineral","option","extras"],"anchors":[]},{"id":"20","title":"Option: nix-mineral.extras.misc.usbguard.whitelist-at-boot","content":"Automatically allow all connected devices at boot in USBGuard.\nIf false, USB devices will be blocked until USBGuard is configured.\n::: {.note} For laptop users, inbuilt speakers and bluetooth cards may be disabled by USBGuard by default, so whitelisting them manually or enabling this may solve that. :::","path":"options.html#option-nix-mineral-extras-misc-usbguard-whitelist-at-boot","tokens":["for","disabled","connected","speakers","may","laptop","manually","this","usb","bluetooth","solve","will","them","allow","that","all","blocked","and","false","users","default","inbuilt","automatically","note","usbguard","configured","enabling","until","boot","cards","whitelisting","devices"],"title_tokens":["usbguard","whitelist-at-boot","option","extras","nix-mineral","misc"],"anchors":[]},{"id":"21","title":"Option: nix-mineral.extras.network","content":"Extra settings for the network.","path":"options.html#option-nix-mineral-extras-network","tokens":["extra","settings","the","network","for"],"title_tokens":["network","nix-mineral","extras","option"],"anchors":[]},{"id":"22","title":"Option: nix-mineral.extras.network.bluetooth-kmodules","content":"Enable bluetooth related kernel modules.","path":"options.html#option-nix-mineral-extras-network-bluetooth-kmodules","tokens":["bluetooth","kernel","modules","enable","related"],"title_tokens":["bluetooth-kmodules","nix-mineral","option","network","extras"],"anchors":[]},{"id":"23","title":"Option: nix-mineral.extras.network.tcp-window-scaling","content":"Disable TCP window scaling.\n::: {.warning} If false, may help mitigate TCP reset DoS attacks, but may also harm network performance when at high latencies. :::","path":"options.html#option-nix-mineral-extras-network-tcp-window-scaling","tokens":["window","help","performance","but","dos","mitigate","network","tcp","high","false","latencies","reset","scaling","also","harm","may","attacks","when","warning","disable"],"title_tokens":["tcp-window-scaling","network","nix-mineral","option","extras"],"anchors":[]},{"id":"24","title":"Option: nix-mineral.extras.system","content":"Extra settings for the system.","path":"options.html#option-nix-mineral-extras-system","tokens":["settings","system","for","extra","the"],"title_tokens":["option","system","nix-mineral","extras"],"anchors":[]},{"id":"25","title":"Option: nix-mineral.extras.system.hardened-malloc","content":"Use hardened-malloc as default memory allocator for all processes.\n::: {.warning} DO NOT USE THIS OPTION ON ANY PRODUCTION SYSTEM! FOR TESTING PURPOSES ONLY! :::","path":"options.html#option-nix-mineral-extras-system-hardened-malloc","tokens":["for","all","warning","purposes","processes","production","system","only","this","not","option","default","memory","use","allocator","any","testing","hardened-malloc"],"title_tokens":["extras","option","nix-mineral","hardened-malloc","system"],"anchors":[]},{"id":"26","title":"Option: nix-mineral.extras.system.lock-root","content":"Lock the root account.\n::: {.note} Requires another method of privilege escalation, i.e sudo or doas, and declarative accounts to work properly. :::","path":"options.html#option-nix-mineral-extras-system-lock-root","tokens":["another","root","privilege","escalation","doas","account","the","properly","and","work","note","declarative","requires","sudo","method","lock","accounts"],"title_tokens":["nix-mineral","extras","lock-root","option","system"],"anchors":[]},{"id":"27","title":"Option: nix-mineral.extras.system.minimize-swapping","content":"Reduce swappiness to bare minimum.\nMay reduce risk of writing sensitive information to disk, but hampers zram performance. Also useless if you do not even use a swap file/partition, i.e zram only setup.","path":"options.html#option-nix-mineral-extras-system-minimize-swapping","tokens":["risk","information","disk","writing","swappiness","file","useless","reduce","performance","even","bare","not","setup","zram","minimum","but","only","hampers","use","partition","also","swap","sensitive","you","may"],"title_tokens":["nix-mineral","option","minimize-swapping","system","extras"],"anchors":[]},{"id":"28","title":"Option: nix-mineral.extras.system.secure-chrony","content":"Replace systemd-timesyncd with chrony for NTP, and configure chrony for NTS and to use the seccomp filter for security.","path":"options.html#option-nix-mineral-extras-system-secure-chrony","tokens":["filter","nts","seccomp","with","for","ntp","systemd-timesyncd","configure","use","replace","chrony","and","the","security"],"title_tokens":["extras","nix-mineral","secure-chrony","system","option"],"anchors":[]},{"id":"29","title":"Option: nix-mineral.extras.system.unprivileged-userns","content":"Enable or disable unprivileged user namespaces.\nIt has been the cause of many privilege escalation vulnerabilities, but can cause breakage. If false, this may break some applications that rely on user namespaces.\n::: {.note} It is left enabled by default now because the benefits of rootless sandboxing in Chromium, unprivileged containers, and bubblewrap among many other applications, combined with the increased maturity of unprivileged namespaces as of Oct 2025. :::","path":"options.html#option-nix-mineral-extras-system-unprivileged-userns","tokens":["2025","other","but","escalation","user","left","unprivileged","because","containers","combined","that","maturity","increased","now","chromium","rely","many","has","some","sandboxing","namespaces","break","oct","enable","default","with","been","privilege","rootless","vulnerabilities","bubblewrap","may","benefits","breakage","this","disable","can","and","among","note","enabled","applications","the","cause","false"],"title_tokens":["option","nix-mineral","system","extras","unprivileged-userns"],"anchors":[]},{"id":"30","title":"Option: nix-mineral.extras.system.zram","content":"Enable zram so that memory is more likely to be compressed instead of written to disk, which may include sensitive information.\nImproves storage lifespan and overall performance when swapping as a side effect.\n::: {.note} Not enabled by default due to interfering with zswap. Additionally, the task of limiting swapping of sensitive data depends highly on the user's individual swapping setup which can't be reliably inferred. :::","path":"options.html#option-nix-mineral-extras-system-zram","tokens":["additionally","may","improves","likely","include","lifespan","when","more","due","zswap","data","can","user","compressed","swapping","sensitive","side","and","enabled","depends","memory","inferred","interfering","storage","the","task","note","instead","not","information","effect","limiting","individual","zram","overall","enable","written","which","with","highly","default","setup","disk","reliably","that","performance"],"title_tokens":["system","option","extras","zram","nix-mineral"],"anchors":[]},{"id":"31","title":"Option: nix-mineral.extras.tmpfiles","content":"Use systemd-tmpfiles to restrict file permissions in various folders.","path":"options.html#option-nix-mineral-extras-tmpfiles","tokens":["use","restrict","systemd-tmpfiles","file","permissions","various","folders"],"title_tokens":["tmpfiles","extras","nix-mineral","option"],"anchors":[]},{"id":"32","title":"Option: nix-mineral.extras.tmpfiles.etc-nixos","content":"Set to true to recursively make all files in /etc/nixos owned and readable only by root.\n/etc/nixos is not owned by root by default, which can be hazardous as files that are included in the rebuild may be editable by unprivileged users.\n::: {.note} This may have unintended side effects if user state is intentionally stored in /etc/nixos, and is therefore no longer enabled by default. :::","path":"options.html#option-nix-mineral-extras-tmpfiles-etc-nixos","tokens":["true","set","user","enabled","included","this","the","all","owned","readable","can","nixos","that","intentionally","root","etc","note","side","and","default","are","editable","may","unintended","have","recursively","not","only","hazardous","stored","rebuild","unprivileged","users","longer","which","effects","state","make","files","therefore"],"title_tokens":["option","etc-nixos","nix-mineral","tmpfiles","extras"],"anchors":[]},{"id":"33","title":"Option: nix-mineral.extras.tmpfiles.home","content":"Set to true to recursively restrict permissions of /home/$USER so that only the owner of the directory can access it (the user).\n::: {.note} This is not retroactively applied. The \"~\" option means this only applies to newly created files, not existing files. Consider setting manually if this is a priority, but this may have side effects like obliterating existing executable access mask bits. :::\n::: {.warning} This may also have unintended side effects, e.g, root owned files being unreadable if somehow created in a user home directory. :::\n::: {.warning} This may cause recursion/boot speed problems. See:\nhttps://github.com/cynicsketch/nix-mineral/issues/28 :::","path":"options.html#option-nix-mineral-extras-tmpfiles-home","tokens":["mask","files","set","existing","unreadable","directory","this","boot","speed","manually","github","can","but","not","the","obliterating","owner","recursion","problems","option","means","user","only","priority","home","created","have","bits","nix-mineral","see","being","setting","also","owned","com","restrict","permissions","applies","recursively","like","somehow","side","effects","unintended","cause","https","that","warning","true","newly","retroactively","note","issues","cynicsketch","access","applied","executable","may","consider","root"],"title_tokens":["nix-mineral","extras","tmpfiles","option","home"],"anchors":[]},{"id":"34","title":"Option: nix-mineral.filesystems","content":"Utility for hardening filesystems and special filesystems.","path":"options.html#option-nix-mineral-filesystems","tokens":["utility","for","and","special","hardening","filesystems"],"title_tokens":["nix-mineral","option","filesystems"],"anchors":[]},{"id":"35","title":"Option: nix-mineral.filesystems.enable","content":"Enable the filesystem hardening utility from nix-mineral.","path":"options.html#option-nix-mineral-filesystems-enable","tokens":["enable","filesystem","utility","from","nix-mineral","the","hardening"],"title_tokens":["nix-mineral","filesystems","enable","option"],"anchors":[]},{"id":"36","title":"Option: nix-mineral.filesystems.normal","content":"Filesystem hardening.\nSets the device option as <name>, and the options: \"bind\", \"nosuid\", \"noexec\", \"nodev\" by default.\n::: {.warning} The default filesystem hardening settings make necessary assumptions about partition layout. That is, that / is one partition, and /boot or /boot/EFI is another partition.\nIf using a more exotic partition layout, you may need to account for this and adjust {option}nix-mineral.filesystems.normal.$/foo/bar/.options.\"bind\" accordingly, or face potential evaluation issues.\nBind mounts are necessary when a directory is on a shared partition.\nBind mounts must be EXPLICITLY DISABLED when a directory gets its own, dedicated partition.\nSee: https://github.com/cynicsketch/nix-mineral/issues/11 :::","path":"options.html#option-nix-mineral-filesystems-normal","tokens":["https","exotic","you","accordingly","face","see","are","filesystems","filesystem","and","bar","gets","assumptions","dedicated","sets","own","name","nosuid","one","may","noexec","another","for","disabled","potential","issues","mounts","boot","layout","default","account","warning","com","partition","normal","directory","cynicsketch","hardening","the","options","about","using","evaluation","foo","necessary","make","need","efi","adjust","settings","nodev","that","explicitly","option","nix-mineral","when","more","github","its","bind","this","device","shared","must"],"title_tokens":["option","normal","filesystems","nix-mineral"],"anchors":[]},{"id":"37","title":"Option: nix-mineral.filesystems.normal.&lt;name&gt;.device","content":"Location of the device.","path":"options.html#option-nix-mineral-filesystems-normal-<name>-device","tokens":["the","location","device"],"title_tokens":["nix-mineral","option","normal","filesystems","device","name"],"anchors":[]},{"id":"38","title":"Option: nix-mineral.filesystems.normal.&lt;name&gt;.enable","content":"Whether to enable the filesystem mount.","path":"options.html#option-nix-mineral-filesystems-normal-<name>-enable","tokens":["mount","whether","the","enable","filesystem"],"title_tokens":["name","enable","option","nix-mineral","filesystems","normal"],"anchors":[]},{"id":"39","title":"Option: nix-mineral.filesystems.normal.&lt;name&gt;.options","content":"Options used to mount the file system.\nIf the value is false, the option is disabled.\nIf the value is an integer or a string, it is passed as \"name=value\".","path":"options.html#option-nix-mineral-filesystems-normal-<name>-options","tokens":["mount","options","value","integer","the","string","used","system","false","file","disabled","passed","name","option"],"title_tokens":["option","normal","nix-mineral","name","options","filesystems"],"anchors":[]},{"id":"40","title":"Option: nix-mineral.filesystems.special","content":"Special Filesystem hardening.\nSets the option \"noexec\" by default.","path":"options.html#option-nix-mineral-filesystems-special","tokens":["default","special","hardening","noexec","filesystem","sets","the","option"],"title_tokens":["filesystems","special","nix-mineral","option"],"anchors":[]},{"id":"41","title":"Option: nix-mineral.filesystems.special.&lt;name&gt;.device","content":"Location of the device.","path":"options.html#option-nix-mineral-filesystems-special-<name>-device","tokens":["the","device","location"],"title_tokens":["special","name","device","option","nix-mineral","filesystems"],"anchors":[]},{"id":"42","title":"Option: nix-mineral.filesystems.special.&lt;name&gt;.enable","content":"Whether to enable the filesystem mount.","path":"options.html#option-nix-mineral-filesystems-special-<name>-enable","tokens":["enable","filesystem","mount","whether","the"],"title_tokens":["option","name","enable","nix-mineral","special","filesystems"],"anchors":[]},{"id":"43","title":"Option: nix-mineral.filesystems.special.&lt;name&gt;.options","content":"Options used to mount the file system.\nIf the value is false, the option is disabled.\nIf the value is an integer or a string, it is passed as \"name=value\".","path":"options.html#option-nix-mineral-filesystems-special-<name>-options","tokens":["mount","integer","string","file","name","options","false","the","system","value","used","option","passed","disabled"],"title_tokens":["option","nix-mineral","name","filesystems","options","special"],"anchors":[]},{"id":"44","title":"Option: nix-mineral.preset","content":"The preset (or presets) to use for the nix-mineral module. (all presets are applied on top of the default preset)\nTo select multiple presets, provide a list of preset names. The order of presets matters, the top ones will have more priority.\ndefault: only default settings.\ncompatibility: disables or enables settings to aim at compatibility.\nmaximum: enables every optional security setting to have maximum protection.\nperformance: disables or enables settings to aim at performance.","path":"options.html#option-nix-mineral-preset","tokens":["preset","setting","the","all","top","provide","priority","names","applied","settings","enables","maximum","use","optional","every","have","aim","matters","ones","nix-mineral","are","protection","default","more","multiple","compatibility","presets","security","module","select","list","only","disables","performance","for","order","will"],"title_tokens":["nix-mineral","preset","option"],"anchors":[]},{"id":"45","title":"Option: nix-mineral.settings","content":"nix-mineral settings.","path":"options.html#option-nix-mineral-settings","tokens":["settings","nix-mineral"],"title_tokens":["option","nix-mineral","settings"],"anchors":[]},{"id":"46","title":"Option: nix-mineral.settings.debug","content":"Limit various debugging information to reduce info available to potential attackers.","path":"options.html#option-nix-mineral-settings-debug","tokens":["information","attackers","potential","various","info","debugging","available","reduce","limit"],"title_tokens":["option","settings","debug","nix-mineral"],"anchors":[]},{"id":"47","title":"Option: nix-mineral.settings.debug.coredump","content":"Enable core dumps everywhere.\nCore dumps contain a programs memory, usually after a crash, which could include sensitive information including encryption keys being written to the disk without any protection.\nIf false, this disables core dumps using a combination of sysctl, PAM, and systemd. These are grouped together, because the disablement of any individual one of these might otherwise make available a bypass.\n::: {.note} You might need core dumps when debugging crashing programs. :::","path":"options.html#option-nix-mineral-settings-debug-coredump","tokens":["memory","sensitive","dumps","usually","false","keys","written","crash","being","disk","combination","protection","might","bypass","debugging","crashing","disables","together","enable","the","one","could","otherwise","available","note","when","programs","after","core","everywhere","which","include","using","sysctl","including","pam","contain","encryption","information","without","and","these","are","grouped","this","because","disablement","individual","make","you","systemd","any","need"],"title_tokens":["coredump","debug","option","nix-mineral","settings"],"anchors":[]},{"id":"48","title":"Option: nix-mineral.settings.debug.debugfs","content":"Enable/disable the Linux debugfs, which exposes a lot of possibly sensitive information.","path":"options.html#option-nix-mineral-settings-debug-debugfs","tokens":["debugfs","sensitive","information","linux","enable","lot","possibly","exposes","disable","the","which"],"title_tokens":["option","nix-mineral","debugfs","settings","debug"],"anchors":[]},{"id":"49","title":"Option: nix-mineral.settings.debug.dmesg-restrict","content":"Only allow users with root privileges or CAP_SYSLOG to use dmesg.","path":"options.html#option-nix-mineral-settings-debug-dmesg-restrict","tokens":["dmesg","use","with","users","only","root","allow","cap_syslog","privileges"],"title_tokens":["dmesg-restrict","nix-mineral","settings","debug","option"],"anchors":[]},{"id":"50","title":"Option: nix-mineral.settings.debug.efipstore","content":"If set to false, Disable both the EFI persistent storage feature and Error Record Serialization Table (ERST) support as a form of defense-in-depth.\nThis prevents the kernel from writing crash logs and other persistent data to the storage backend.\n::: {.note} See:\nhttps://blogs.oracle.com/linux/pstore-linux-kernel-persistent-storage-file-system\nhttps://uefi.org/htmlspecs/ACPI_Spec_6_4_html/18_ACPI_Platform_Error_Interfaces/error-serialization.html :::","path":"options.html#option-nix-mineral-settings-debug-efipstore","tokens":["support","htmlspecs","the","set","org","serialization","disable","defense-in-depth","this","writing","data","oracle","efi","error","backend","feature","prevents","crash","18_acpi_platform_error_interfaces","acpi_spec_6_4_html","note","both","false","storage","table","form","kernel","see","https","com","pstore-linux-kernel-persistent-storage-file-system","linux","html","record","uefi","from","persistent","and","logs","other","blogs","erst","error-serialization"],"title_tokens":["nix-mineral","settings","debug","option","efipstore"],"anchors":[]},{"id":"51","title":"Option: nix-mineral.settings.debug.kptr-restrict","content":"Display all kernel pointers as 0s regardless of user privileges when printed.\nThis may interfere with specific diagnostic and performance profiling tools.","path":"options.html#option-nix-mineral-settings-debug-kptr-restrict","tokens":["interfere","pointers","privileges","with","when","performance","profiling","specific","diagnostic","printed","regardless","all","kernel","this","and","user","display","tools","may"],"title_tokens":["debug","kptr-restrict","option","settings","nix-mineral"],"anchors":[]},{"id":"52","title":"Option: nix-mineral.settings.debug.panic-reboot","content":"Force the system to automatically reboot upon kernel panic instead of freezing.\nThis helps to mitigate denial of service attacks by automatically recovering and preventing the capture of information presented by a kernel panic screen.\nThis may inhibit debugging kernel panics, since the immediate reboot prevents immediate analysis of error messages which may be displayed.","path":"options.html#option-nix-mineral-settings-debug-panic-reboot","tokens":["panics","panic","mitigate","attacks","force","upon","system","may","automatically","and","this","preventing","the","reboot","inhibit","presented","information","kernel","messages","debugging","instead","freezing","helps","prevents","capture","analysis","recovering","which","displayed","error","denial","since","immediate","screen","service"],"title_tokens":["panic-reboot","option","debug","settings","nix-mineral"],"anchors":[]},{"id":"53","title":"Option: nix-mineral.settings.debug.quiet-boot","content":"If set to true, minimize information displayed during boot to reduce information available to an attacker.","path":"options.html#option-nix-mineral-settings-debug-quiet-boot","tokens":["true","boot","minimize","displayed","during","available","attacker","reduce","information","set"],"title_tokens":["debug","nix-mineral","option","quiet-boot","settings"],"anchors":[]},{"id":"54","title":"Option: nix-mineral.settings.debug.restrict-printk","content":"Supress kernel messages via printk to only display log level 3 (error) messages or higher, e.g, more severe warnings.\nThis limits access to debugging information which can be used by an attacker.","path":"options.html#option-nix-mineral-settings-debug-restrict-printk","tokens":["can","error","severe","messages","log","attacker","warnings","this","via","supress","access","debugging","level","more","limits","display","printk","kernel","only","higher","used","information","which"],"title_tokens":["nix-mineral","settings","debug","restrict-printk","option"],"anchors":[]},{"id":"55","title":"Option: nix-mineral.settings.entropy","content":"Settings for entropy sources.","path":"options.html#option-nix-mineral-settings-entropy","tokens":["sources","settings","for","entropy"],"title_tokens":["option","nix-mineral","settings","entropy"],"anchors":[]},{"id":"56","title":"Option: nix-mineral.settings.entropy.aslr","content":"Turn on protection and randomize stack, vdso page and mmap + randomize brk base address.","path":"options.html#option-nix-mineral-settings-entropy-aslr","tokens":["mmap","turn","base","page","and","vdso","protection","address","randomize","brk","stack"],"title_tokens":["option","settings","nix-mineral","aslr","entropy"],"anchors":[]},{"id":"57","title":"Option: nix-mineral.settings.entropy.aslr-max-bits","content":"Use the maximum number of bits of entropy to address space layout randomization, a widely used mitigation against memory exploits.\n::: {.note} The values used here are currently only valid for x86_64.\nOther CPU architectures may require different numbers here, consult upstream documentation as necessary. :::\n::: {.note} See:\nhttps://en.wikipedia.org/wiki/Address_space_layout_randomization :::","path":"options.html#option-nix-mineral-settings-entropy-aslr-max-bits","tokens":["mitigation","may","the","numbers","number","only","maximum","entropy","memory","are","currently","here","for","wikipedia","different","necessary","values","valid","address","used","layout","upstream","https","address_space_layout_randomization","wiki","randomization","exploits","see","space","consult","documentation","architectures","bits","require","org","other","note","x86_64","widely","cpu","against","use"],"title_tokens":["settings","entropy","nix-mineral","option","aslr-max-bits"],"anchors":[]},{"id":"58","title":"Option: nix-mineral.settings.entropy.hwrng","content":"Disable trusting both the CPU's hardware random number generator and any entropy seed passed to the bootloader. We assume the hardware random number generation could be flawed.","path":"options.html#option-nix-mineral-settings-entropy-hwrng","tokens":["number","and","flawed","assume","generation","both","the","bootloader","disable","cpu","random","generator","seed","any","trusting","entropy","passed","hardware","could"],"title_tokens":["hwrng","nix-mineral","option","settings","entropy"],"anchors":[]},{"id":"59","title":"Option: nix-mineral.settings.entropy.jitterentropy","content":"Enable jitterentropy with both the daemon and the kernel module to provide additional entropy and compensate for disabled hardware entropy sources.\n::: {.note} Read more about why at:\nhttps://github.com/smuellerDD/jitterentropy-rngd/issues/27\nhttps://blogs.oracle.com/linux/post/rngd1\nhttps://github.com/Kicksecure/security-misc/commit/fe1f1b73a77d11c136cedcdb3efcb57f4c68c6af :::","path":"options.html#option-nix-mineral-settings-entropy-jitterentropy","tokens":["commit","kicksecure","for","https","provide","jitterentropy","kernel","compensate","issues","disabled","with","smuellerdd","the","fe1f1b73a77d11c136cedcdb3efcb57f4c68c6af","jitterentropy-rngd","and","hardware","entropy","linux","why","additional","enable","both","github","oracle","module","rngd1","post","sources","more","note","security-misc","about","read","daemon","blogs","com"],"title_tokens":["option","jitterentropy","settings","nix-mineral","entropy"],"anchors":[]},{"id":"60","title":"Option: nix-mineral.settings.etc","content":"Modify files in /etc to limit attack surface.","path":"options.html#option-nix-mineral-settings-etc","tokens":["attack","modify","etc","limit","surface","files"],"title_tokens":["etc","settings","option","nix-mineral"],"anchors":[]},{"id":"61","title":"Option: nix-mineral.settings.etc.generic-machine-id","content":"Set machine-id to the Kicksecure machine-id, for privacy reasons.\n::: {.warning} This may have unintended consequences if machine-id needs to be unique, e.g for log collection or VM management. :::","path":"options.html#option-nix-mineral-settings-etc-generic-machine-id","tokens":["kicksecure","the","needs","log","consequences","set","privacy","unintended","for","machine-id","warning","this","may","unique","management","reasons","have","collection"],"title_tokens":["etc","generic-machine-id","option","nix-mineral","settings"],"anchors":[]},{"id":"62","title":"Option: nix-mineral.settings.etc.kicksecure-bluetooth","content":"Borrow Kicksecure bluetooth configuration for better bluetooth privacy and security.\nDisables bluetooth automatically when not connected to any device.","path":"options.html#option-nix-mineral-settings-etc-kicksecure-bluetooth","tokens":["kicksecure","any","borrow","better","connected","configuration","and","bluetooth","disables","when","for","not","device","automatically","privacy","security"],"title_tokens":["settings","etc","nix-mineral","kicksecure-bluetooth","option"],"anchors":[]},{"id":"63","title":"Option: nix-mineral.settings.etc.kicksecure-gitconfig","content":"Borrow Kicksecure gitconfig, disabling git symlinks and enabling fsck by default for better git security.","path":"options.html#option-nix-mineral-settings-etc-kicksecure-gitconfig","tokens":["enabling","default","security","kicksecure","and","disabling","fsck","for","borrow","gitconfig","symlinks","git","better"],"title_tokens":["settings","nix-mineral","etc","kicksecure-gitconfig","option"],"anchors":[]},{"id":"64","title":"Option: nix-mineral.settings.etc.kicksecure-issue","content":"Borrow Kicksecure banner/issue.\nProvides NO exploit resistance whatsoever, only serves as a deterrent to unauthorized access and to comply with Lynis.\nThere are no assurances that anything stated here is legally valid.","path":"options.html#option-nix-mineral-settings-etc-kicksecure-issue","tokens":["access","assurances","that","comply","are","unauthorized","and","anything","kicksecure","deterrent","stated","issue","resistance","with","here","whatsoever","legally","valid","exploit","only","serves","banner","provides","lynis","borrow","there"],"title_tokens":["kicksecure-issue","nix-mineral","option","settings","etc"],"anchors":[]},{"id":"65","title":"Option: nix-mineral.settings.etc.kicksecure-module-blacklist","content":"Borrow Kicksecure module blacklist.\n\"install \"foobar\" /bin/false\" prevents the module from being loaded at all. \"blacklist \"foobar\"\" prevents the module from being loaded automatically at boot, but it can still be loaded afterwards.\nBecause the \"install /bin/false\" method does not register as a regular blacklist, this might cause issues with kernel module auditing e.g using Lynis. If so, you'll need to generate a whitelist.\n::: {.warning} This may have unintended consequences if you require specific drivers, and may cause breakage. :::","path":"options.html#option-nix-mineral-settings-etc-kicksecure-module-blacklist","tokens":["can","regular","install","using","afterwards","all","kernel","register","blacklist","boot","drivers","method","because","cause","issues","automatically","lynis","you","generate","module","whitelist","this","warning","bin","but","may","unintended","kicksecure","require","specific","not","borrow","from","might","prevents","false","does","and","being","loaded","with","breakage","still","need","have","the","auditing","consequences","foobar"],"title_tokens":["option","nix-mineral","settings","etc","kicksecure-module-blacklist"],"anchors":[]},{"id":"66","title":"Option: nix-mineral.settings.etc.no-root-securetty","content":"Use an empty /etc/securetty to prevent root login on tty.\n::: {.warning} If set to true, logging in as the root user will fail and throw an error: \"Login incorrect\" :::","path":"options.html#option-nix-mineral-settings-etc-no-root-securetty","tokens":["logging","will","etc","securetty","root","the","empty","set","warning","throw","fail","prevent","and","use","error","incorrect","tty","true","user","login"],"title_tokens":["option","nix-mineral","settings","etc","no-root-securetty"],"anchors":[]},{"id":"67","title":"Option: nix-mineral.settings.kernel","content":"Settings meant to harden the linux kernel.","path":"options.html#option-nix-mineral-settings-kernel","tokens":["meant","the","linux","harden","settings","kernel"],"title_tokens":["option","nix-mineral","settings","kernel"],"anchors":[]},{"id":"68","title":"Option: nix-mineral.settings.kernel.amd-iommu-force-isolation","content":"Set amd_iommu=force_isolation kernel parameter.\nIf you're not using an AMD CPU, this does nothing and can be safely ignored.\n::: {.warning} You may need to set this to false as a workaround for a boot hanging issue on Linux kernel 6.13. :::","path":"options.html#option-nix-mineral-settings-kernel-amd-iommu-force-isolation","tokens":["issue","hanging","cpu","ignored","amd","linux","parameter","nothing","warning","not","for","boot","kernel","false","force_isolation","does","safely","and","amd_iommu","may","need","workaround","you","can","using","set","this"],"title_tokens":["amd-iommu-force-isolation","kernel","nix-mineral","option","settings"],"anchors":[]},{"id":"69","title":"Option: nix-mineral.settings.kernel.bdev-write-mount","content":"If set to false, prevent runaway privileged processes from writing to block devices to protect against runaway privileged processes causing filesystem corruption and kernel crashes.\n::: {.note} See:\nhttps://github.com/Kicksecure/security-misc/pull/334\nhttps://github.com/a13xp0p0v/kernel-hardening-checker :::","path":"options.html#option-nix-mineral-settings-kernel-bdev-write-mount","tokens":["prevent","github","privileged","com","corruption","security-misc","334","runaway","kernel-hardening-checker","devices","https","see","set","processes","protect","pull","note","from","causing","block","filesystem","a13xp0p0v","writing","against","and","kernel","false","crashes","kicksecure"],"title_tokens":["settings","nix-mineral","kernel","bdev-write-mount","option"],"anchors":[]},{"id":"70","title":"Option: nix-mineral.settings.kernel.binfmt-misc","content":"Enable binfmt_misc.\n::: {.warning} If false, breaks Roseta, among other applications. :::","path":"options.html#option-nix-mineral-settings-kernel-binfmt-misc","tokens":["roseta","warning","false","other","applications","breaks","binfmt_misc","enable","among"],"title_tokens":["kernel","nix-mineral","settings","option","binfmt-misc"],"anchors":[]},{"id":"71","title":"Option: nix-mineral.settings.kernel.busmaster-bit","content":"Enable busmaster bit at boot, which may prevent some DMA attacks.\n::: {.warning} If false, this may prevent systems with low resource OR specific firmware configurations from booting.\nMay worsen performance as a side effect. https://en.wikipedia.org/wiki/Bus_mastering :::","path":"options.html#option-nix-mineral-settings-kernel-busmaster-bit","tokens":["this","false","configurations","from","enable","warning","wiki","busmaster","https","may","org","low","systems","boot","prevent","some","with","bit","specific","worsen","wikipedia","effect","dma","booting","resource","firmware","performance","attacks","which","bus_mastering","side"],"title_tokens":["kernel","busmaster-bit","option","nix-mineral","settings"],"anchors":[]},{"id":"72","title":"Option: nix-mineral.settings.kernel.core-pid","content":"Including PID in core dumps if those are reenabled, otherwise, this does nothing.\nIf hideproc is enabled, this prevents some substitution attacks designed obtain sensitive information by predicting PIDs and inducing core dumps.\nOtherwise, this is still nice to have for forensic purposes/log analysis, so that sources of core dumps are more obvious.\n::: {.note} See:\nhttps://securitybuzz.com/cybersecurity-news/new-vulnerabilities-in-linux-core-dump-handlers-expose-password-hashes/\nhttps://lwn.net/Articles/1024160/ :::","path":"options.html#option-nix-mineral-settings-kernel-core-pid","tokens":["still","does","sensitive","otherwise","forensic","are","enabled","obtain","substitution","log","nothing","analysis","sources","more","note","prevents","securitybuzz","cybersecurity-news","lwn","hideproc","designed","predicting","new-vulnerabilities-in-linux-core-dump-handlers-expose-password-hashes","dumps","com","net","nice","https","for","obvious","reenabled","and","those","see","purposes","including","1024160","this","that","information","pids","attacks","articles","core","pid","inducing","some","have"],"title_tokens":["kernel","core-pid","option","settings","nix-mineral"],"anchors":[]},{"id":"73","title":"Option: nix-mineral.settings.kernel.cpu-mitigations","content":"Apply relevant CPU exploit mitigations, May harm performance.\nsmt-off: Enable CPU mitigations and disables symmetric multithreading.\nsmt-on: Enable symmetric multithreading and just use default CPU mitigations, to potentially improve performance.\noff: Disables all CPU mitigations. May improve performance further, but is even more dangerous!\n\n::: {.warning} Turning all CPU mitigations off completely is a TERRIBLE idea. Even the most robustly sandboxed and restricted code in the world can instantly rootkit your computer. One web page is all it takes for all your keys to be someone else's: https://leaky.page/ :::","path":"options.html#option-nix-mineral-settings-kernel-cpu-mitigations","tokens":["can","smt-on","one","improve","instantly","warning","rootkit","https","harm","computer","potentially","apply","even","but","page","most","smt-off","else","more","multithreading","idea","code","enable","keys","someone","leaky","further","default","exploit","relevant","mitigations","use","may","the","sandboxed","off","all","completely","world","symmetric","terrible","your","performance","web","takes","turning","disables","robustly","for","dangerous","cpu","and","just","restricted"],"title_tokens":["cpu-mitigations","nix-mineral","option","settings","kernel"],"anchors":[]},{"id":"74","title":"Option: nix-mineral.settings.kernel.harden-bpf","content":"Harden eBPF against JIT spraying attacks, to reduce the risk of abuse because eBPF allows executing potentially dangerous code in the kernel.\n::: {.note} See:\nhttps://en.wikipedia.org/wiki/EBPF#Security :::","path":"options.html#option-nix-mineral-settings-kernel-harden-bpf","tokens":["jit","wiki","abuse","https","reduce","see","harden","spraying","risk","executing","potentially","attacks","the","org","code","note","security","wikipedia","because","allows","kernel","against","ebpf","dangerous"],"title_tokens":["option","settings","nix-mineral","kernel","harden-bpf"],"anchors":[]},{"id":"75","title":"Option: nix-mineral.settings.kernel.intel-iommu","content":"Explicitly enable intel IOMMU to reduce risk of DMA attacks and other memory abuse.\n::: {.note} Does nothing if you don't use an intel processor. :::","path":"options.html#option-nix-mineral-settings-kernel-intel-iommu","tokens":["other","explicitly","enable","processor","memory","note","attacks","and","nothing","abuse","use","intel","iommu","reduce","don","does","you","dma","risk"],"title_tokens":["kernel","nix-mineral","intel-iommu","settings","option"],"anchors":[]},{"id":"76","title":"Option: nix-mineral.settings.kernel.io-uring","content":"Enable io_uring, is the cause of many vulnerabilities, and is disabled on Android + ChromeOS.\nThis may be desired for specific environments concerning Proxmox.","path":"options.html#option-nix-mineral-settings-kernel-io-uring","tokens":["may","specific","android","enable","environments","desired","concerning","cause","this","for","io_uring","vulnerabilities","many","chromeos","the","proxmox","and","disabled"],"title_tokens":["kernel","option","settings","io-uring","nix-mineral"],"anchors":[]},{"id":"77","title":"Option: nix-mineral.settings.kernel.iommu-passthrough","content":"Enable or disable bypassing the IOMMU for direct memory access.\nCould increase I/O performance on ARM64 systems, with risk.\nIf false, forces DMA to go through IOMMU to mitigate some DMA attacks.","path":"options.html#option-nix-mineral-settings-kernel-iommu-passthrough","tokens":["the","for","arm64","mitigate","forces","memory","systems","could","bypassing","access","with","risk","dma","through","attacks","false","iommu","disable","some","enable","increase","performance","direct"],"title_tokens":["settings","nix-mineral","kernel","option","iommu-passthrough"],"anchors":[]},{"id":"78","title":"Option: nix-mineral.settings.kernel.kcfi","content":"If set to true, switch (back) to using kCFI as the default Control Flow Integrity (CFI) implementation as kCFI mandates hash validation at the source making it more difficult to bypass.\nThis is in contrast to FineIBT which was made the default in kernel 6.2 due to its performance benefits as it only performs hash checks at the destinations.\n::: {.note} See:\nhttps://docs.kernel.org/next/x86/shstk.html :::","path":"options.html#option-nix-mineral-settings-kernel-kcfi","tokens":["org","implementation","was","made","switch","checks","note","back","validation","more","its","html","next","the","control","see","performs","hash","kcfi","this","using","bypass","benefits","flow","which","making","https","integrity","fineibt","set","default","cfi","due","contrast","performance","source","docs","mandates","x86","destinations","difficult","shstk","true","kernel","only"],"title_tokens":["option","kcfi","settings","kernel","nix-mineral"],"anchors":[]},{"id":"79","title":"Option: nix-mineral.settings.kernel.kexec","content":"Prevent replacing the running kernel with kexec for security reasons.\nOn other distributions, kexec is most notably used for updating the Linux kernel without rebooting, however, NixOS does not support this.\nA comprehensive list of usecases is not feasible, but consider consulting the following references as well as upstream documentation where necessary:\nhttps://docs.kernel.org/admin-guide/mm/kho.html\nhttps://github.com/NixOS/nixpkgs/issues/10726\nhttps://docs.kernel.org/admin-guide/kdump/kdump.html","path":"options.html#option-nix-mineral-settings-kernel-kexec","tokens":["usecases","distributions","notably","github","prevent","replacing","for","reasons","without","not","comprehensive","documentation","necessary","rebooting","upstream","html","does","this","other","security","feasible","most","support","consider","org","well","docs","com","kho","https","with","linux","10726","consulting","running","kexec","kernel","nixos","but","updating","nixpkgs","however","issues","kdump","list","the","used","following","where","references","admin-guide"],"title_tokens":["option","nix-mineral","kernel","settings","kexec"],"anchors":[]},{"id":"80","title":"Option: nix-mineral.settings.kernel.kfence","content":"If set to true, enable the kernel \"Electric-Fence\" sampling-based memory safety error to detect heap out-of-bounds access, use-after-free, and invalid-free errors.\n::: {.note} See:\nhttps://docs.kernel.org/dev-tools/kfence.html :::","path":"options.html#option-nix-mineral-settings-kernel-kfence","tokens":["and","sampling-based","errors","kfence","heap","see","error","dev-tools","memory","invalid-free","detect","access","safety","electric-fence","html","true","kernel","https","set","enable","docs","use-after-free","org","out-of-bounds","the","note"],"title_tokens":["option","nix-mineral","settings","kernel","kfence"],"anchors":[]},{"id":"81","title":"Option: nix-mineral.settings.kernel.lockdown","content":"Enable linux kernel lockdown, this blocks loading of unsigned kernel modules and breaks hibernation.\n::: {.note} If false, you probably want to disable {option}nix-mineral.settings.kernel.only-signed-modules. :::","path":"options.html#option-nix-mineral-settings-kernel-lockdown","tokens":["disable","unsigned","linux","modules","breaks","loading","probably","hibernation","kernel","blocks","enable","nix-mineral","settings","and","lockdown","note","only-signed-modules","you","want","false","this","option"],"title_tokens":["nix-mineral","kernel","lockdown","option","settings"],"anchors":[]},{"id":"82","title":"Option: nix-mineral.settings.kernel.only-signed-modules","content":"Requires all kernel modules to be signed. This prevents out-of-tree kernel modules from working unless signed.\n::: {.note} If false, {option}nix-mineral.settings.kernel.lockdown must also be false. :::","path":"options.html#option-nix-mineral-settings-kernel-only-signed-modules","tokens":["must","working","false","note","signed","settings","prevents","nix-mineral","unless","all","lockdown","from","requires","option","kernel","modules","this","out-of-tree","also"],"title_tokens":["nix-mineral","only-signed-modules","settings","kernel","option"],"anchors":[]},{"id":"83","title":"Option: nix-mineral.settings.kernel.oops-panic","content":"Intentionally induce kernel panics on \"oops\" errors and above, to limit the extent of certain exploits which trigger kernel oopses.\n::: {.warning} This might cause stability issues with certain poorly written drivers that aren't malicious. If you experience random kernel panics, consider disabling this. :::","path":"options.html#option-nix-mineral-settings-kernel-oops-panic","tokens":["warning","stability","consider","kernel","and","errors","panics","aren","which","poorly","induce","oopses","malicious","experience","disabling","certain","drivers","above","extent","trigger","the","cause","written","that","oops","issues","limit","might","random","with","exploits","this","intentionally","you"],"title_tokens":["nix-mineral","settings","kernel","option","oops-panic"],"anchors":[]},{"id":"84","title":"Option: nix-mineral.settings.kernel.page-alloc-shuffle","content":"Make page allocations less predicatable by randomizing freelists.\n::: {.tip} This is one of the few things which IMPROVES performance as a side effect, and there's usually no reason to disable this. :::\n::: {.note} See:\nhttps://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/commit/?id=e900a918b0984ec8f2eb150b8477a47b75d17692 :::","path":"options.html#option-nix-mineral-settings-kernel-page-alloc-shuffle","tokens":["reason","less","which","this","make","pub","linux","there","https","effect","org","commit","see","randomizing","page","tip","the","few","side","allocations","performance","improves","predicatable","one","git","torvalds","disable","kernel","freelists","scm","e900a918b0984ec8f2eb150b8477a47b75d17692","usually","things","note","and"],"title_tokens":["option","settings","kernel","nix-mineral","page-alloc-shuffle"],"anchors":[]},{"id":"85","title":"Option: nix-mineral.settings.kernel.perf-subsystem.restrict-access","content":"Restrict perf subsystem access to reduce attack surface.\n::: {.note} See:\nhttps://www.kernel.org/doc/html/latest/admin-guide/perf-security.html :::","path":"options.html#option-nix-mineral-settings-kernel-perf-subsystem-restrict-access","tokens":["perf-security","see","restrict","attack","https","access","kernel","reduce","admin-guide","perf","subsystem","html","doc","www","note","org","latest","surface"],"title_tokens":["restrict-access","settings","option","nix-mineral","kernel","perf-subsystem"],"anchors":[]},{"id":"86","title":"Option: nix-mineral.settings.kernel.perf-subsystem.restrict-usage","content":"Restrict perf subsystem usage (activity) to reduce attack surface.\n::: {.note} See https://www.kernel.org/doc/html/latest/admin-guide/perf-security.html for more information. :::","path":"options.html#option-nix-mineral-settings-kernel-perf-subsystem-restrict-usage","tokens":["reduce","for","doc","see","attack","kernel","activity","https","note","www","html","perf-security","more","subsystem","usage","org","information","latest","restrict","admin-guide","surface","perf"],"title_tokens":["nix-mineral","restrict-usage","settings","option","perf-subsystem","kernel"],"anchors":[]},{"id":"87","title":"Option: nix-mineral.settings.kernel.pti","content":"Enable Page Table Isolation (PTI) to mitigate some KASLR bypasses and the Meltdown CPU vulnerability. It may also tax performance.","path":"options.html#option-nix-mineral-settings-kernel-pti","tokens":["kaslr","pti","mitigate","the","also","table","tax","vulnerability","may","cpu","enable","isolation","page","and","performance","meltdown","some","bypasses"],"title_tokens":["nix-mineral","kernel","pti","settings","option"],"anchors":[]},{"id":"88","title":"Option: nix-mineral.settings.kernel.randomize-kstack-offset","content":"Randomize the kernel's stack offset on every syscall, to make attacks relying on predicting the location of the kernel's stack more difficult.\n::: {.note} See:\nhttps://lkml.org/lkml/2019/3/18/246 :::","path":"options.html#option-nix-mineral-settings-kernel-randomize-kstack-offset","tokens":["offset","246","kernel","syscall","the","make","attacks","relying","stack","every","difficult","note","see","https","org","predicting","2019","randomize","location","more","lkml"],"title_tokens":["nix-mineral","settings","randomize-kstack-offset","option","kernel"],"anchors":[]},{"id":"89","title":"Option: nix-mineral.settings.kernel.restrict-bpf","content":"Restrict eBPF to CAP_BPF in order to prevent abuse by unprivileged users.\n::: {.note} See:\nhttps://en.wikipedia.org/wiki/EBPF#Security :::","path":"options.html#option-nix-mineral-settings-kernel-restrict-bpf","tokens":["unprivileged","wiki","note","prevent","users","ebpf","org","order","https","security","abuse","see","cap_bpf","wikipedia","restrict"],"title_tokens":["nix-mineral","option","kernel","settings","restrict-bpf"],"anchors":[]},{"id":"90","title":"Option: nix-mineral.settings.kernel.restrict-line-disciplines","content":"Restrict TTY line discipline loading to CAP_SYS_MODULE to prevent unprivileged users from loading insecure line disciplines.\n::: {.note} See https://a13xp0p0v.github.io/2017/03/24/CVE-2017-2636.html as an example exploit. :::","path":"options.html#option-nix-mineral-settings-kernel-restrict-line-disciplines","tokens":["2017","restrict","tty","a13xp0p0v","cve-2017-2636","disciplines","from","note","line","unprivileged","users","see","prevent","insecure","cap_sys_module","loading","https","github","html","discipline","example","exploit"],"title_tokens":["kernel","option","nix-mineral","restrict-line-disciplines","settings"],"anchors":[]},{"id":"91","title":"Option: nix-mineral.settings.kernel.slab-debug","content":"Set to true to modify the \"slab_debug\" boot parameter to enable red zoning and sanity checks to detect memory corruption.\nAdds significant overhead to memory allocation.\n::: {.warning} Because this is a debugging option, it will disable kernel pointer hashing and leak kernel memory addresses to root unless the \"hash_pointers=always\" parameter is used, which is only supported on kernel version 6.17 and above. Otherwise, \"hash_pointers\" is silently ignored. :::\n::: {.note} See:\nhttps://gitlab.tails.boum.org/tails/tails/-/issues/19613\nhttps://kspp.github.io/Recommended_Settings\nhttps://github.com/Kicksecure/security-misc/issues/253 :::","path":"options.html#option-nix-mineral-settings-kernel-slab-debug","tokens":["leak","only","memory","red","corruption","github","hash_pointers","253","gitlab","and","pointer","boum","significant","issues","enable","silently","version","adds","zoning","hashing","unless","above","recommended_settings","used","slab_debug","checks","option","org","kicksecure","see","true","supported","parameter","this","the","which","ignored","19613","disable","because","boot","security-misc","com","tails","will","root","https","kspp","note","otherwise","detect","sanity","set","always","allocation","modify","addresses","debugging","kernel","warning","overhead"],"title_tokens":["kernel","nix-mineral","slab-debug","option","settings"],"anchors":[]},{"id":"92","title":"Option: nix-mineral.settings.kernel.slab-merging","content":"Set to false to disable slab merging to make it harder to influence the slab cache layout and compartmentalize the damage of certain memory attacks by limiting influence to individual caches.\n::: {.note} See:\nhttps://www.openwall.com/lists/kernel-hardening/2017/06/19/33\nhttps://www.openwall.com/lists/kernel-hardening/2017/06/20/10 :::","path":"options.html#option-nix-mineral-settings-kernel-slab-merging","tokens":["and","attacks","limiting","false","layout","make","slab","memory","www","cache","2017","compartmentalize","disable","the","set","openwall","individual","https","note","lists","kernel-hardening","merging","influence","caches","certain","com","harder","damage","see"],"title_tokens":["settings","option","slab-merging","kernel","nix-mineral"],"anchors":[]},{"id":"93","title":"Option: nix-mineral.settings.kernel.strict-iommu","content":"Enable and force the IOMMU to be used to reduce the risk of DMA attacks, and strictly invalidate TLBs to prevent abuse of stale data.\n::: {.note} See:\nhttps://en.wikipedia.org/wiki/Input%E2%80%93output_memory_management_unit :::","path":"options.html#option-nix-mineral-settings-kernel-strict-iommu","tokens":["input","enable","risk","reduce","tlbs","data","wikipedia","93output_memory_management_unit","attacks","iommu","stale","wiki","and","invalidate","dma","force","the","see","strictly","used","prevent","abuse","note","https","org"],"title_tokens":["option","strict-iommu","nix-mineral","kernel","settings"],"anchors":[]},{"id":"94","title":"Option: nix-mineral.settings.kernel.sysrq","content":"Control the magic SysRq key functionality of the Linux kernel.\nIt is a 'magical' key combo you can hit which the kernel will respond to regardless of whatever else it is doing, unless it is completely locked up.\nnone: Keep the default configuration of your kernel.\noff: Disables sysrq completely.\nsak: Enable SAK (Secure Attention Key).\n\n::: {.note} SAK prevents keylogging, if used correctly. See:\nhttps://madaidans-insecurities.github.io/guides/linux-hardening.html#accessing-root-securely\nhttps://www.kicksecure.com/wiki/Login_spoofing :::","path":"options.html#option-nix-mineral-settings-kernel-sysrq","tokens":["can","functionality","linux","disables","note","used","see","madaidans-insecurities","guides","secure","kernel","will","else","sak","https","locked","linux-hardening","control","completely","html","wiki","unless","magical","combo","correctly","com","prevents","www","hit","accessing-root-securely","your","off","kicksecure","regardless","github","keylogging","login_spoofing","configuration","key","you","respond","enable","attention","sysrq","the","magic","whatever","which","keep","default","doing","none"],"title_tokens":["nix-mineral","option","kernel","settings","sysrq"],"anchors":[]},{"id":"95","title":"Option: nix-mineral.settings.kernel.tiocsti","content":"If false, disable TIOCSTI because it's used to inject arbitrary characters and potentially lead to privilege escalation.\nAlready disabled by default on modern (>=6.2) Linux kernel versions, but included for future reference.\nMay break outdated screen readers relying on legacy functionality, but because of the above reasoning, this will never be considered for the compatibility preset.\n::: {.note} See:\nhttps://lore.kernel.org/lkml/20221228205726.rfevry7ud6gmttg5@begin/T/ :::","path":"options.html#option-nix-mineral-settings-kernel-tiocsti","tokens":["escalation","this","inject","and","preset","linux","https","for","20221228205726","lkml","functionality","privilege","reference","considered","included","above","note","future","rfevry7ud6gmttg5","used","arbitrary","versions","may","default","break","readers","compatibility","lore","because","kernel","legacy","lead","outdated","tiocsti","relying","screen","false","modern","the","reasoning","potentially","will","but","see","org","begin","characters","disabled","never","disable","already"],"title_tokens":["tiocsti","option","kernel","settings","nix-mineral"],"anchors":[]},{"id":"96","title":"Option: nix-mineral.settings.kernel.unprivileged-userfaultfd","content":"If set to false, limit access to userfaultfd() syscall to the CAP_SYS_PTRACE capability.\nuserfaultfd has been used for use-after-free exploits in the past.\n::: {.note} See:\nhttps://man7.org/linux/man-pages/man2/userfaultfd.2.html\nhttps://duasynt.com/blog/linux-kernel-heap-spray\nhttps://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/commit/?id=cefdca0a86be517bc390fc4541e3674b8e7803b0 :::","path":"options.html#option-nix-mineral-settings-kernel-unprivileged-userfaultfd","tokens":["linux-kernel-heap-spray","kernel","false","has","use-after-free","userfaultfd","torvalds","see","linux","been","access","past","note","git","the","man-pages","used","commit","limit","syscall","capability","scm","set","cap_sys_ptrace","man7","html","blog","for","man2","pub","duasynt","cefdca0a86be517bc390fc4541e3674b8e7803b0","exploits","https","org","com"],"title_tokens":["kernel","unprivileged-userfaultfd","option","nix-mineral","settings"],"anchors":[]},{"id":"97","title":"Option: nix-mineral.settings.kernel.vdso32","content":"If set to false, disable 32-bit Virtual Dynamic Shared Object (vDSO) mappings as these are a legacy compatibility feature for superseded glibc versions.\n::: {.note} See:\nhttps://man7.org/linux/man-pages/man7/vdso.7.html :::","path":"options.html#option-nix-mineral-settings-kernel-vdso32","tokens":["these","set","https","virtual","versions","32-bit","superseded","for","man7","linux","man-pages","html","dynamic","are","object","see","disable","legacy","feature","vdso","org","mappings","glibc","note","shared","compatibility","false"],"title_tokens":["nix-mineral","option","settings","kernel","vdso32"],"anchors":[]},{"id":"98","title":"Option: nix-mineral.settings.kernel.vsyscall","content":"If set to false, Disable vsyscalls, which are obsolete and create static memory locations that are easy to exploit.\n::: {.note} See:\nhttps://lwn.net/Articles/446528/ :::","path":"options.html#option-nix-mineral-settings-kernel-vsyscall","tokens":["note","locations","disable","and","memory","create","false","static","easy","which","exploit","set","are","that","see","https","vsyscalls","obsolete","lwn","446528","articles","net"],"title_tokens":["option","kernel","nix-mineral","vsyscall","settings"],"anchors":[]},{"id":"99","title":"Option: nix-mineral.settings.kernel.zero-alloc","content":"Zero memory during both allocation and free time to help mitigate use-after-free exploits.\n::: {.note} See:\nhttps://en.wikipedia.org/wiki/Dangling_pointer\nhttps://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/commit/?id=6471384af2a6530696fc0203bafe4de41a23c9ef :::","path":"options.html#option-nix-mineral-settings-kernel-zero-alloc","tokens":["git","use-after-free","help","linux","wikipedia","free","note","dangling_pointer","allocation","org","kernel","https","mitigate","see","pub","both","time","during","exploits","zero","wiki","scm","and","commit","torvalds","6471384af2a6530696fc0203bafe4de41a23c9ef","memory"],"title_tokens":["zero-alloc","settings","option","nix-mineral","kernel"],"anchors":[]},{"id":"100","title":"Option: nix-mineral.settings.misc","content":"Configure miscellaneous settings, usually additional software.","path":"options.html#option-nix-mineral-settings-misc","tokens":["miscellaneous","settings","usually","configure","additional","software"],"title_tokens":["option","settings","misc","nix-mineral"],"anchors":[]},{"id":"101","title":"Option: nix-mineral.settings.misc.bootloader-editor","content":"Set to false to disable bootloader editors, to prevent access to the root shell or otherwise weakening security by tampering with boot parameters.\n::: {.note} This currently does nothing if you don't use systemd-boot.\nConsider filing a PR if/when similar configuration for other bootloaders can be added unobtrusively. :::","path":"options.html#option-nix-mineral-settings-misc-bootloader-editor","tokens":["other","note","consider","filing","configuration","the","disable","boot","shell","bootloaders","when","bootloader","prevent","weakening","root","false","otherwise","access","this","nothing","can","does","security","currently","editors","you","use","similar","for","parameters","set","don","systemd-boot","added","unobtrusively","with","tampering"],"title_tokens":["nix-mineral","option","bootloader-editor","misc","settings"],"anchors":[]},{"id":"102","title":"Option: nix-mineral.settings.misc.dnssec","content":"Make DNS connections fail if not using a DNS server supporting DNSSEC.\n::: {.note} Currently does nothing if you don't use systemd-resolved.\nConsider filing a PR if/when similar configuration for other DNS resolving software can be added unobtrusively. :::","path":"options.html#option-nix-mineral-settings-misc-dnssec","tokens":["supporting","fail","not","note","use","can","systemd-resolved","other","make","connections","server","you","configuration","nothing","similar","for","software","unobtrusively","consider","does","don","currently","dns","using","dnssec","filing","resolving","added","when"],"title_tokens":["misc","dnssec","settings","option","nix-mineral"],"anchors":[]},{"id":"103","title":"Option: nix-mineral.settings.misc.nix-wheel","content":"Limit access to nix commands to users with the \"wheel\" group (\"sudoers\").\nIf false, may be useful for allowing a non-wheel user to, for example, use devshell.","path":"options.html#option-nix-mineral-settings-misc-nix-wheel","tokens":["nix","sudoers","limit","access","commands","wheel","with","allowing","for","non-wheel","use","false","devshell","users","group","user","useful","the","example","may"],"title_tokens":["option","settings","nix-mineral","misc","nix-wheel"],"anchors":[]},{"id":"104","title":"Option: nix-mineral.settings.network","content":"Settings for the network.","path":"options.html#option-nix-mineral-settings-network","tokens":["for","the","settings","network"],"title_tokens":["option","network","nix-mineral","settings"],"anchors":[]},{"id":"105","title":"Option: nix-mineral.settings.network.arp.announce","content":"Always use the best local address for announcing local IP via ARP.\nSeems to be most restrictive option.","path":"options.html#option-nix-mineral-settings-network-arp-announce","tokens":["arp","restrictive","for","always","the","via","most","address","announcing","seems","option","local","use","best"],"title_tokens":["announce","network","settings","nix-mineral","arp","option"],"anchors":[]},{"id":"106","title":"Option: nix-mineral.settings.network.arp.drop-gratuitous","content":"Drop Gratuitous ARP frames to prevent ARP poisoning.\nThis can cause issues when ARP proxies are used in the network.","path":"options.html#option-nix-mineral-settings-network-arp-drop-gratuitous","tokens":["are","proxies","frames","arp","cause","poisoning","network","gratuitous","can","this","when","prevent","used","drop","the","issues"],"title_tokens":["settings","drop-gratuitous","arp","option","nix-mineral","network"],"anchors":[]},{"id":"107","title":"Option: nix-mineral.settings.network.arp.filter","content":"Enable ARP filtering in the kernel to prevent the Linux kernel from handling the ARP table globally and mitigate some ARP spoofing and ARP cache poisoning attacks.","path":"options.html#option-nix-mineral-settings-network-arp-filter","tokens":["attacks","table","kernel","from","cache","and","enable","the","arp","handling","filtering","prevent","linux","mitigate","some","spoofing","globally","poisoning"],"title_tokens":["nix-mineral","settings","option","arp","network","filter"],"anchors":[]},{"id":"108","title":"Option: nix-mineral.settings.network.arp.ignore","content":"Ignore/don't reply to specific ARP requests to limit scope of ARP spoofing.\nThis may break certain VM networking configurations if set to 'link,' which can be fixed by setting to 'local' or 'none.'\nHowever, such a regression has been intentionally excluded from the compatibility preset unless new information or usecases are made apparent, given that this issue appears to be isolated to niche setups which NixOS is not known or advisable to be used for.\nnone: Keep the default configuration of your kernel.\nlocal: Reply only if the target IP address is within the local address range configured on the incoming interface\nlink: Reply only if the target IP is on the same link.\n\n::: {.note} See:\nhttps://github.com/Kicksecure/security-misc/pull/279\nhttps://github.com/Kicksecure/security-misc/pull/290\nhttps://github.com/QubesOS/qubes-issues/issues/9990\nhttps://github.com/mullvad/mullvadvpn-app/blob/main/audits/2024-12-10-X41-D-Sec.md#mllvd-cr-24-03-virtual-ip-address-of-tunnel-device-leaks-to-network-adjacent-participant-severity-medium\nhttps://github.com/mullvad/mullvadvpn-app/pull/7141 :::","path":"options.html#option-nix-mineral-settings-network-arp-ignore","tokens":["target","279","main","the","spoofing","intentionally","however","new","mullvadvpn-app","qubesos","may","local","has","networking","requests","fixed","known","information","kicksecure","reply","setting","apparent","arp","such","appears","not","used","default","configuration","qubes-issues","incoming","kernel","niche","only","none","break","link","mllvd-cr-24-03-virtual-ip-address-of-tunnel-device-leaks-to-network-adjacent-participant-severity-medium","within","made","audits","set","https","issue","that","keep","specific","limit","can","isolated","nixos","note","mullvad","github","setups","see","preset","9990","address","are","excluded","given","range","for","blob","scope","configured","7141","com","pull","ignore","regression","been","compatibility","interface","290","which","your","certain","configurations","usecases","same","issues","unless","security-misc","2024-12-10-x41-d-sec","from","this","advisable","don"],"title_tokens":["option","ignore","settings","nix-mineral","network","arp"],"anchors":[]},{"id":"109","title":"Option: nix-mineral.settings.network.icmp.cast","content":"Set to false to ignore all ICMPv6 and ICMPv4 echo and timestamp requests sent to broadcast/multicast/anycast.\nMakes system slightly harder to enumerate on a network.\n::: .{note} Redundant with {option}nix-mineral.settings.network.icmp.ignore-all enabled. :::","path":"options.html#option-nix-mineral-settings-network-icmp-cast","tokens":["note","slightly","ignore","redundant","settings","anycast","timestamp","all","icmpv4","system","broadcast","icmp","multicast","echo","requests","false","icmpv6","enumerate","makes","option","with","enabled","network","and","ignore-all","harder","nix-mineral","set","sent"],"title_tokens":["cast","nix-mineral","settings","option","network","icmp"],"anchors":[]},{"id":"110","title":"Option: nix-mineral.settings.network.icmp.ignore-all","content":"Set to true to ignore all ICMPv6 and ICMPv4 echo and timestamp requests.\nMakes system slightly harder to enumerate on a network.\nYou will not be able to ping this computer with ICMP packets if this is enabled.","path":"options.html#option-nix-mineral-settings-network-icmp-ignore-all","tokens":["icmpv4","all","ignore","not","this","set","true","network","and","requests","will","able","harder","computer","icmp","echo","system","you","enabled","ping","timestamp","icmpv6","slightly","enumerate","packets","with","makes"],"title_tokens":["nix-mineral","network","icmp","option","ignore-all","settings"],"anchors":[]},{"id":"111","title":"Option: nix-mineral.settings.network.icmp.ignore-bogus","content":"Ignore bogus ICMP error responses to reduce potential system impact caused by spammed error responses.","path":"options.html#option-nix-mineral-settings-network-icmp-ignore-bogus","tokens":["responses","icmp","potential","bogus","error","ignore","spammed","reduce","caused","system","impact"],"title_tokens":["nix-mineral","network","option","settings","icmp","ignore-bogus"],"anchors":[]},{"id":"112","title":"Option: nix-mineral.settings.network.icmp.redirect","content":"Set to false to disable ICMP redirects to prevent some MITM attacks.\n::: .{note} See:\nhttps://askubuntu.com/questions/118273/what-are-icmp-redirects-and-should-they-be-blocked :::","path":"options.html#option-nix-mineral-settings-network-icmp-redirect","tokens":["questions","see","com","disable","icmp","askubuntu","some","false","mitm","prevent","https","set","redirects","what-are-icmp-redirects-and-should-they-be-blocked","118273","note","attacks"],"title_tokens":["network","icmp","redirect","option","nix-mineral","settings"],"anchors":[]},{"id":"113","title":"Option: nix-mineral.settings.network.icmp.secure-redirect","content":"Use secure ICMP redirects by default.\n::: {.note} Helpful only if {option}nix-mineral.settings.network.icmp.redirect is enabled, otherwise this does nothing. Not harmful to leave enabled even if unnecessary. :::","path":"options.html#option-nix-mineral-settings-network-icmp-secure-redirect","tokens":["unnecessary","does","enabled","only","network","harmful","icmp","not","default","settings","secure","redirect","this","nothing","leave","helpful","even","option","otherwise","redirects","nix-mineral","note","use"],"title_tokens":["nix-mineral","settings","icmp","option","secure-redirect","network"],"anchors":[]},{"id":"114","title":"Option: nix-mineral.settings.network.ip-forwarding","content":"Enable or disable IP forwarding.\n::: .{warning} If false, this may cause issues with certain VM networking, and must be true if the system is meant to function as a router. :::","path":"options.html#option-nix-mineral-settings-network-ip-forwarding","tokens":["this","true","enable","system","certain","with","networking","false","meant","function","the","cause","warning","may","and","disable","must","forwarding","router","issues"],"title_tokens":["option","network","settings","ip-forwarding","nix-mineral"],"anchors":[]},{"id":"115","title":"Option: nix-mineral.settings.network.ipv6-tempaddr","content":"Enable IPv6 Privacy Extensions (RFC3041) and prefer the temporary address.\nInclusive a \"kitchen sink\" config to enable privacy extensions in relevant daemons. If you do not use these, nothing will happen.\nIf you use alternative daemons or replacements, considering looking at upstream documentation or filing a PR to add their configurations here.\n::: .{note} GrapheneOS devs seem to believe it is relevant to use IPV6 privacy extensions alongside MAC randomization, so consider doing both where applicable. https://grapheneos.org/features#wifi-privacy :::","path":"options.html#option-nix-mineral-settings-network-ipv6-tempaddr","tokens":["grapheneos","randomization","https","wifi-privacy","looking","prefer","ipv6","documentation","note","happen","alternative","here","both","where","org","sink","features","considering","config","inclusive","kitchen","use","configurations","seem","alongside","these","consider","applicable","temporary","and","upstream","you","the","doing","mac","add","privacy","relevant","daemons","replacements","their","devs","believe","enable","nothing","extensions","address","not","filing","rfc3041","will"],"title_tokens":["nix-mineral","settings","network","ipv6-tempaddr","option"],"anchors":[]},{"id":"116","title":"Option: nix-mineral.settings.network.log-martians","content":"Log packets with impossible addresses to kernel log.\nNo active security benefit, just makes it easier to spot a DDOS/DOS by giving extra logs.\nThis may worsen performance due to the additional logging.","path":"options.html#option-nix-mineral-settings-network-log-martians","tokens":["log","addresses","benefit","just","spot","dos","makes","this","giving","packets","security","extra","easier","ddos","active","kernel","with","may","impossible","performance","due","the","logging","worsen","additional","logs"],"title_tokens":["option","network","log-martians","nix-mineral","settings"],"anchors":[]},{"id":"117","title":"Option: nix-mineral.settings.network.max-addresses","content":"Number of global unicast IPv6 addresses can be assigned to each interface.\nSet this to false to disable this option entirely.","path":"options.html#option-nix-mineral-settings-network-max-addresses","tokens":["addresses","false","global","this","ipv6","option","can","set","each","interface","entirely","disable","assigned","unicast","number"],"title_tokens":["max-addresses","settings","nix-mineral","network","option"],"anchors":[]},{"id":"118","title":"Option: nix-mineral.settings.network.neighbor-solicitations","content":"Number of IPv6 duplicate address detection neighbor solicitations to send out per address.\nSee RFC4681 for details.\nSet this to false to disable this option entirely.","path":"options.html#option-nix-mineral-settings-network-neighbor-solicitations","tokens":["option","for","rfc4681","detection","ipv6","address","neighbor","duplicate","number","solicitations","out","per","this","false","details","set","disable","see","send","entirely"],"title_tokens":["settings","option","neighbor-solicitations","nix-mineral","network"],"anchors":[]},{"id":"119","title":"Option: nix-mineral.settings.network.random-mac","content":"If set to true, randomize mac addressees to improve privacy.\n::: {.note} This currently only works if you use networkmanager. If you don't, this does nothing and you should consult upstream documentation or file a PR to add relevant configuration. :::","path":"options.html#option-nix-mineral-settings-network-random-mac","tokens":["set","only","file","you","true","nothing","should","this","improve","randomize","privacy","does","networkmanager","currently","consult","documentation","note","configuration","use","relevant","don","and","addressees","works","upstream","add","mac"],"title_tokens":["network","settings","option","nix-mineral","random-mac"],"anchors":[]},{"id":"120","title":"Option: nix-mineral.settings.network.rfc1337","content":"RFC1337 protects from TIME-WAIT assassination attacks by dropping TCP RST packets when in the TIME-WAIT state.\nThis protects against some potention DoS attacks which could cause TCP connections to drop given specific circumstances or crafted packets.\n::: {.note} Additional reference:\nhttps://datatracker.ietf.org/doc/html/rfc1337\nhttps://serverfault.com/questions/787624/why-isnt-net-ipv4-tcp-rfc1337-enabled-by-default :::","path":"options.html#option-nix-mineral-settings-network-rfc1337","tokens":["ietf","specific","reference","protects","dos","the","datatracker","state","assassination","time-wait","tcp","this","note","serverfault","com","https","org","from","some","drop","cause","additional","packets","doc","html","questions","why-isnt-net-ipv4-tcp-rfc1337-enabled-by-default","when","potention","could","787624","dropping","crafted","given","rst","against","connections","circumstances","which","rfc1337","attacks"],"title_tokens":["rfc1337","nix-mineral","settings","option","network"],"anchors":[]},{"id":"121","title":"Option: nix-mineral.settings.network.router-advertisements","content":"IPv6 router advertisements which are accepted.\nMalicious router advertisements have the potential to create a MITM attack by modifying the default gateway, cause a DoS/DDoS attack when flooded, or initiate unauthorized IPv6 access.\noff: Disable all IPv6 router advertisements.\nrestrict: Restrict the parameters of IPv6 router advertisements which are accepted.\non: Enable all IPv6 router advertisements (effectively, do nothing).\n\nRouter advertisements are never authenticated, and can be sent and received by any device on the local network.\n::: {.warning} Setting to off or restrict may cause issues with IPv6 address autoconfiguration or host discovery. :::\n::: {.note} See:\nhttps://datatracker.ietf.org/doc/html/rfc6104\nhttps://datatracker.ietf.org/doc/html/rfc6105\nhttps://archive.conference.hitb.org/hitbsecconf2012kul/materials/D1T2%20-%20Marc%20Heuse%20-%20IPv6%20Insecurity%20Revolutions.pdf :::","path":"options.html#option-nix-mineral-settings-network-router-advertisements","tokens":["are","advertisements","ipv6","when","discovery","default","sent","restrict","ietf","https","org","conference","20heuse","may","parameters","create","device","with","authenticated","the","ddos","autoconfiguration","dos","enable","effectively","hitb","gateway","pdf","any","attack","hitbsecconf2012kul","modifying","network","router","20revolutions","access","datatracker","never","setting","all","see","host","archive","doc","potential","can","received","materials","d1t2","rfc6104","malicious","warning","20insecurity","nothing","which","20marc","html","mitm","flooded","have","unauthorized","local","disable","issues","cause","20ipv6","rfc6105","address","and","initiate","accepted","note","off"],"title_tokens":["nix-mineral","option","settings","network","router-advertisements"],"anchors":[]},{"id":"122","title":"Option: nix-mineral.settings.network.router-solicitations","content":"Number of IPv6 Router Solicitations to send until assuming no routers are present.\nSetting to 0 limits outgoing traffic on the network, and reduces the frequecy of IPv6 router advertisements received.\nSee RFC4681 for details.\nSet this to false to disable this option entirely.\n::: {.note} There is no point to setting this number above 0 if {option}nix-mineral.settings.network.router-advertisements is set to off. :::","path":"options.html#option-nix-mineral-settings-network-router-solicitations","tokens":["frequecy","for","note","point","settings","ipv6","network","and","this","above","nix-mineral","solicitations","disable","router","the","routers","entirely","there","advertisements","assuming","see","reduces","traffic","router-advertisements","until","off","limits","present","set","setting","false","send","option","received","are","outgoing","rfc4681","number","details"],"title_tokens":["option","router-solicitations","settings","network","nix-mineral"],"anchors":[]},{"id":"123","title":"Option: nix-mineral.settings.network.rp-filter","content":"Validate source IPs of packets received on the machine, protecting from IP spoofing.","path":"options.html#option-nix-mineral-settings-network-rp-filter","tokens":["ips","the","source","packets","machine","received","from","spoofing","protecting","validate"],"title_tokens":["nix-mineral","option","network","settings","rp-filter"],"anchors":[]},{"id":"124","title":"Option: nix-mineral.settings.network.shared-media","content":"Enable sending and receiving of shared media redirects.\nThis setting overwrites net.ipv4.conf.all.secure_redirects.\nRefer to RFC1620","path":"options.html#option-nix-mineral-settings-network-shared-media","tokens":["overwrites","secure_redirects","all","refer","media","rfc1620","sending","ipv4","enable","net","redirects","this","conf","setting","and","receiving","shared"],"title_tokens":["nix-mineral","option","settings","shared-media","network"],"anchors":[]},{"id":"125","title":"Option: nix-mineral.settings.network.source-route","content":"Disable source routing if set to false, since it allows for redirecting network traffic and potentially creating a man in the middle attack.\n::: {.note} See:\nhttps://docs.redhat.com/en/documentation/red_hat_enterprise_linux/6/html/security_guide/sect-security_guide-server_security-disable-source-routing :::","path":"options.html#option-nix-mineral-settings-network-source-route","tokens":["man","false","middle","routing","set","source","since","traffic","creating","red_hat_enterprise_linux","redirecting","note","and","the","com","redhat","html","disable","https","allows","for","network","see","security_guide","potentially","sect-security_guide-server_security-disable-source-routing","docs","documentation","attack"],"title_tokens":["source-route","settings","nix-mineral","option","network"],"anchors":[]},{"id":"126","title":"Option: nix-mineral.settings.network.syncookies","content":"Use syncookies to help protect against SYN flooding, a type DoS attack.\n::: {.note} See:\nhttps://en.wikipedia.org/wiki/SYN_flood :::","path":"options.html#option-nix-mineral-settings-network-syncookies","tokens":["note","syn","against","help","flooding","dos","see","use","type","org","https","protect","syncookies","wikipedia","wiki","syn_flood","attack"],"title_tokens":["syncookies","nix-mineral","option","settings","network"],"anchors":[]},{"id":"127","title":"Option: nix-mineral.settings.network.tcp-sack","content":"Set to false to disable TCP SACK, which has been used for DoS attacks and been exploited in the past.\nRarely used, but can reduce networking performance if disabled in certain applications.\n::: {.note} Additional reading:\nhttps://github.com/Netflix/security-bulletins/blob/master/advisories/third-party/2019-001.md\nhttps://serverfault.com/questions/10955/when-to-turn-tcp-sack-off :::","path":"options.html#option-nix-mineral-settings-network-tcp-sack","tokens":["10955","security-bulletins","past","disable","dos","networking","for","been","certain","advisories","which","disabled","additional","questions","rarely","used","attacks","can","applications","reduce","com","netflix","set","third-party","when-to-turn-tcp-sack-off","false","and","but","exploited","performance","tcp","reading","blob","the","master","github","serverfault","2019-001","note","sack","has","https"],"title_tokens":["nix-mineral","tcp-sack","option","network","settings"],"anchors":[]},{"id":"128","title":"Option: nix-mineral.settings.network.tcp-timestamps","content":"Enables TCP timestamps.\nDisabling prevents leaking system time, enabling protects against wrapped sequence numbers and improves performance.\nDisabling implicitly disables reuse of TIME_WAIT sockets, as they depend on TCP timestamps which may lead to corruption and an inability to detect duplicate packets. It may also result in port exhaustion as ports may not be immediately reused.\nThere are possible information leaks when timestamps are enabled. Offset randomization used by default prevents uptime prediction, but the rate of incrementing timestamps can be used in some advanced attacks to predict the current clock speed of a running system.\nBecause nix-mineral has different priorities to Whonix, which influences Kicksecure's development, we choose not to disable timestamps by default since clock speed fingerprinting is not a useful threat to most people; if it is important, it is probably smarter to use another Linux distribution entirely.\n::: {.note} In favor of disabling:\nhttps://madaidans-insecurities.github.io/guides/linux-hardening.html#tcp-timestamps\nhttps://forums.whonix.org/t/do-ntp-and-tcp-timestamps-really-leak-your-local-time/7824/6\n\nIn favor of enabling:\nhttps://access.redhat.com/sites/default/files/attachments/20150325_network_performance_tuning.pdf\nhttps://gitlab.tails.boum.org/tails/tails/-/issues/17491 :::","path":"options.html#option-nix-mineral-settings-network-tcp-timestamps","tokens":["the","duplicate","reused","packets","which","note","speed","possible","improves","reuse","exhaustion","boum","timestamps","incrementing","probably","issues","tcp","against","there","numbers","since","protects","when","linux","result","corruption","lead","disabling","org","may","system","files","ports","use","not","linux-hardening","distribution","20150325_network_performance_tuning","kicksecure","detect","sockets","entirely","offset","threat","also","different","smarter","favor","rate","https","github","html","default","time_wait","inability","tcp-timestamps","another","forums","priorities","17491","do-ntp-and-tcp-timestamps-really-leak-your-local-time","port","randomization","prediction","important","sequence","some","gitlab","because","running","attacks","and","information","fingerprinting","sites","most","time","are","guides","choose","predict","clock","performance","used","whonix","people","7824","current","they","disable","but","pdf","enables","advanced","madaidans-insecurities","access","tails","useful","disables","implicitly","redhat","development","nix-mineral","attachments","enabling","immediately","wrapped","has","leaks","enabled","influences","uptime","prevents","leaking","depend","com","can"],"title_tokens":["tcp-timestamps","nix-mineral","network","option","settings"],"anchors":[]},{"id":"129","title":"Option: nix-mineral.settings.pam","content":"Modify pluggable authentication module (PAM) settings.","path":"options.html#option-nix-mineral-settings-pam","tokens":["pam","authentication","modify","settings","pluggable","module"],"title_tokens":["option","nix-mineral","settings","pam"],"anchors":[]},{"id":"130","title":"Option: nix-mineral.settings.pam.login-faildelay","content":"Add/increase the delay to failed logins into the system.\nThe default for nix-mineral is 4 seconds, or 4000000 microseconds.","path":"options.html#option-nix-mineral-settings-pam-login-faildelay","tokens":["for","seconds","default","into","nix-mineral","increase","the","add","system","failed","delay","logins","4000000","microseconds"],"title_tokens":["login-faildelay","nix-mineral","option","settings","pam"],"anchors":[]},{"id":"131","title":"Option: nix-mineral.settings.pam.shadow-hashing","content":"Modify hashing rounds for /etc/shadow; this doesn't automatically rehash your passwords, you'll need to set passwords for your accounts again for this to work.\nIf you declaratively set passwords with a secret manager, consider using a good number (65536) of hashing rounds or more for resilience to password cracking.\nSet this to false to disable this option entirely.","path":"options.html#option-nix-mineral-settings-pam-shadow-hashing","tokens":["work","shadow","rehash","set","need","with","password","this","entirely","manager","cracking","false","your","passwords","doesn","rounds","for","secret","again","etc","consider","65536","more","you","resilience","automatically","disable","accounts","modify","hashing","good","using","declaratively","option","number"],"title_tokens":["settings","nix-mineral","option","pam","shadow-hashing"],"anchors":[]},{"id":"132","title":"Option: nix-mineral.settings.pam.su-wheel-only","content":"Set to true to require wheel to use su and su-l, to reduce the risk of privilege escalation e.g from service accounts which have been maliciously hijacked and used for a shell.","path":"options.html#option-nix-mineral-settings-pam-su-wheel-only","tokens":["risk","privilege","escalation","true","reduce","accounts","maliciously","hijacked","used","for","from","which","been","shell","use","su-l","service","set","have","and","require","wheel","the"],"title_tokens":["pam","nix-mineral","su-wheel-only","settings","option"],"anchors":[]},{"id":"133","title":"Option: nix-mineral.settings.system","content":"Settings for the system.","path":"options.html#option-nix-mineral-settings-system","tokens":["the","for","settings","system"],"title_tokens":["nix-mineral","settings","option","system"],"anchors":[]},{"id":"134","title":"Option: nix-mineral.settings.system.file-protection","content":"Prevent creation of files in world writable directories under certain circumstances to limit spoofing attacks.\n::: {.note} See:\nhttps://github.com/torvalds/linux/commit/30aba6656f61ed44cba445a3c0d38b296fa9e8f5 :::","path":"options.html#option-nix-mineral-settings-system-file-protection","tokens":["directories","com","see","under","https","circumstances","world","limit","github","linux","commit","files","30aba6656f61ed44cba445a3c0d38b296fa9e8f5","prevent","creation","spoofing","certain","torvalds","note","writable","attacks"],"title_tokens":["settings","option","nix-mineral","system","file-protection"],"anchors":[]},{"id":"135","title":"Option: nix-mineral.settings.system.link-protection","content":"Protect hardlinks and softlinks to prevent TOCTOU attacks.\nPrevent users from hardlinking to files they can't read/write to.\nAllows symlinks to be followed only outside world writable directories, when the owner and follower match, or when the directory and symlink owner match.\n::: {.note} See:\nhttps://en.wikipedia.org/wiki/Time-of-check_to_time-of-use :::","path":"options.html#option-nix-mineral-settings-system-link-protection","tokens":["owner","allows","directories","write","read","symlinks","when","wiki","users","symlink","files","softlinks","followed","prevent","match","toctou","writable","note","see","protect","follower","hardlinks","from","only","attacks","directory","https","they","wikipedia","and","hardlinking","can","org","outside","world","time-of-check_to_time-of-use","the"],"title_tokens":["option","nix-mineral","settings","system","link-protection"],"anchors":[]},{"id":"136","title":"Option: nix-mineral.settings.system.lower-address-mmap","content":"Allow or disallow mmap in lower addresses.\nDisallowing mmap in lower addresses reduces the risk that incorrect memory allocations could tamper with the kernel, but may also cause compatibility issues with certain legacy software.\n::: {.note} See:\nhttps://wiki.debian.org/mmap_min_addr :::","path":"options.html#option-nix-mineral-settings-system-lower-address-mmap","tokens":["mmap","with","certain","allocations","disallowing","could","debian","risk","legacy","addresses","note","incorrect","see","https","mmap_min_addr","tamper","wiki","kernel","compatibility","disallow","issues","memory","may","cause","the","also","lower","org","that","but","software","reduces","allow"],"title_tokens":["settings","lower-address-mmap","option","nix-mineral","system"],"anchors":[]},{"id":"137","title":"Option: nix-mineral.settings.system.multilib","content":"Enable multilib support, allowing 32-bit libraries and applications to run.\n::: {.warning} if false, this may cause issues with certain games that still require 32-bit libraries. :::","path":"options.html#option-nix-mineral-settings-system-multilib","tokens":["and","games","require","libraries","certain","with","this","may","cause","enable","applications","support","32-bit","false","issues","that","allowing","multilib","run","still","warning"],"title_tokens":["multilib","nix-mineral","settings","option","system"],"anchors":[]},{"id":"138","title":"Option: nix-mineral.settings.system.proc-mem-force","content":"Configure whether processes can modify their own memory mappings or not, which could be used for some exploits.\nSee: https://github.com/Kicksecure/security-misc/pull/332\nnone - Keep the default configuration of your kernel. ptrace - Only allow modification of memory mappings using ptrace. Affected by the \"yama\" option. never - Do not allow modifying memory mappings at all.","path":"options.html#option-nix-mineral-settings-system-proc-mem-force","tokens":["the","for","https","affected","yama","see","ptrace","allow","their","option","can","com","kicksecure","default","modification","memory","own","could","whether","configuration","some","modifying","exploits","mappings","security-misc","your","which","kernel","using","never","all","only","keep","configure","none","github","not","processes","modify","used","332","pull"],"title_tokens":["system","settings","nix-mineral","proc-mem-force","option"],"anchors":[]},{"id":"139","title":"Option: nix-mineral.settings.system.yama","content":"Yama restricts ptrace, which allows processes to read and modify the memory of other processes. This has obvious security implications.\nptrace may be required for specific debugging or certain video game anti cheats. Usually, the 'relaxed' option avoids most breakage.\nnone: Keep the default configuration of your kernel.\nrelaxed: Only allow parent processes to ptrace child processes.\nrestricted: No processes may be traced with ptrace.","path":"options.html#option-nix-mineral-settings-system-yama","tokens":["the","read","has","cheats","restricts","relaxed","with","processes","yama","video","game","keep","memory","modify","usually","traced","may","allows","most","this","parent","kernel","certain","only","none","anti","debugging","restricted","implications","for","required","your","obvious","configuration","child","default","allow","security","other","specific","option","and","ptrace","avoids","breakage","which"],"title_tokens":["nix-mineral","yama","system","option","settings"],"anchors":[]}]